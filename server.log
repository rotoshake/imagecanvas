ðŸ“Š Setting up database...
ðŸ“Š Database path: /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/database/canvas.db
ðŸ“Š Database instance created
âœ… Database initialized successfully
âœ… Automated cleanup scheduled (every 6 hours)
ðŸš€ Server running at http://localhost:3000
ðŸ“ Upload directory: undefined
ðŸŽ¬ Video processing enabled with formats: webm
POST /api/upload - 2025-08-02T01:24:40.794Z
POST /api/upload - 2025-08-02T01:24:40.808Z
POST /api/upload - 2025-08-02T01:24:40.830Z
POST /api/upload - 2025-08-02T01:24:40.834Z
POST /api/upload - 2025-08-02T01:24:40.864Z
POST /api/upload - 2025-08-02T01:24:40.869Z
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:24:41.941Z
POST /api/upload - 2025-08-02T01:24:42.010Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
POST /api/upload - 2025-08-02T01:24:42.247Z
POST /api/upload - 2025-08-02T01:24:42.854Z
POST /api/upload - 2025-08-02T01:24:42.930Z
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:24:43.219Z
POST /api/upload - 2025-08-02T01:24:43.263Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
POST /api/upload - 2025-08-02T01:24:43.371Z
POST /api/upload - 2025-08-02T01:24:43.940Z
POST /api/upload - 2025-08-02T01:24:44.242Z
POST /api/upload - 2025-08-02T01:24:44.700Z
POST /api/upload - 2025-08-02T01:24:44.995Z
POST /api/upload - 2025-08-02T01:24:45.044Z
POST /api/upload - 2025-08-02T01:24:45.703Z
POST /api/upload - 2025-08-02T01:24:45.867Z
POST /api/upload - 2025-08-02T01:24:46.292Z
POST /api/upload - 2025-08-02T01:24:46.555Z
POST /api/upload - 2025-08-02T01:24:46.626Z
POST /api/upload - 2025-08-02T01:24:47.116Z
POST /api/upload - 2025-08-02T01:24:47.562Z
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:24:47.599Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
POST /api/upload - 2025-08-02T01:24:47.601Z
POST /api/upload - 2025-08-02T01:24:48.058Z
POST /api/upload - 2025-08-02T01:24:48.251Z
POST /api/upload - 2025-08-02T01:24:48.835Z
POST /api/upload - 2025-08-02T01:24:49.039Z
POST /api/upload - 2025-08-02T01:24:49.482Z
POST /api/upload - 2025-08-02T01:24:49.669Z
POST /api/upload - 2025-08-02T01:24:49.748Z
POST /api/upload - 2025-08-02T01:24:50.373Z
POST /api/upload - 2025-08-02T01:24:50.739Z
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:24:50.756Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:24:50.872Z
POST /api/upload - 2025-08-02T01:24:51.147Z
POST /api/upload - 2025-08-02T01:24:51.765Z
POST /api/upload - 2025-08-02T01:24:52.258Z
POST /api/upload - 2025-08-02T01:24:52.658Z
POST /api/upload - 2025-08-02T01:24:52.857Z
POST /api/upload - 2025-08-02T01:24:52.875Z
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:24:53.029Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
POST /api/upload - 2025-08-02T01:24:53.101Z
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:24:53.566Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:24:53.821Z
POST /api/upload - 2025-08-02T01:24:54.005Z
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:24:54.010Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:24:54.431Z
POST /api/upload - 2025-08-02T01:24:54.836Z
POST /api/upload - 2025-08-02T01:24:54.996Z
POST /api/upload - 2025-08-02T01:24:55.301Z
POST /api/upload - 2025-08-02T01:24:55.728Z
POST /api/upload - 2025-08-02T01:24:56.089Z
POST /api/upload - 2025-08-02T01:24:56.406Z
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:24:56.407Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:24:56.408Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:24:57.037Z
POST /api/upload - 2025-08-02T01:24:57.172Z
POST /api/upload - 2025-08-02T01:24:57.177Z
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:24:57.425Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
POST /api/upload - 2025-08-02T01:24:57.482Z
POST /api/upload - 2025-08-02T01:24:57.930Z
POST /api/upload - 2025-08-02T01:24:58.318Z
POST /api/upload - 2025-08-02T01:24:58.353Z
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:24:58.621Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:24:58.790Z
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:24:58.956Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
POST /api/upload - 2025-08-02T01:24:59.347Z
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:24:59.490Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
POST /api/upload - 2025-08-02T01:24:59.685Z
POST /api/upload - 2025-08-02T01:25:00.014Z
POST /api/upload - 2025-08-02T01:25:00.033Z
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:25:00.100Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
POST /api/upload - 2025-08-02T01:25:00.777Z
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:25:00.878Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:25:00.996Z
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:25:00.997Z
POST /api/upload - 2025-08-02T01:25:01.078Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:25:01.079Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
GET /thumbnails/256/IMG_9413.webp - 2025-08-02T01:25:01.081Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9413.webp'
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:25:01.083Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:25:01.085Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
POST /api/upload - 2025-08-02T01:25:01.673Z
POST /api/upload - 2025-08-02T01:25:01.689Z
POST /api/upload - 2025-08-02T01:25:01.901Z
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:25:02.120Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
POST /api/upload - 2025-08-02T01:25:02.183Z
GET /thumbnails/256/IMG_9413.webp - 2025-08-02T01:25:02.365Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9413.webp'
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:25:02.372Z
POST /api/upload - 2025-08-02T01:25:02.517Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
POST /api/upload - 2025-08-02T01:25:02.582Z
POST /api/upload - 2025-08-02T01:25:03.305Z
POST /api/upload - 2025-08-02T01:25:03.652Z
POST /api/upload - 2025-08-02T01:25:03.740Z
POST /api/upload - 2025-08-02T01:25:04.428Z
POST /api/upload - 2025-08-02T01:25:04.803Z
POST /api/upload - 2025-08-02T01:25:04.942Z
POST /api/upload - 2025-08-02T01:25:05.197Z
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:25:05.263Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:25:05.299Z
POST /api/upload - 2025-08-02T01:25:05.956Z
POST /api/upload - 2025-08-02T01:25:06.122Z
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:25:06.207Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
POST /api/upload - 2025-08-02T01:25:06.399Z
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:25:06.502Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:25:06.504Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
POST /api/upload - 2025-08-02T01:25:06.945Z
POST /api/upload - 2025-08-02T01:25:07.067Z
POST /api/upload - 2025-08-02T01:25:07.556Z
POST /api/upload - 2025-08-02T01:25:07.739Z
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:25:07.975Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
POST /api/upload - 2025-08-02T01:25:08.055Z
GET /thumbnails/256/IMG_9413.webp - 2025-08-02T01:25:08.329Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9413.webp'
POST /api/upload - 2025-08-02T01:25:08.643Z
POST /api/upload - 2025-08-02T01:25:08.817Z
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:25:09.092Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
POST /api/upload - 2025-08-02T01:25:09.142Z
POST /api/upload - 2025-08-02T01:25:09.623Z
POST /api/upload - 2025-08-02T01:25:09.748Z
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:25:10.126Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
GET /thumbnails/512/IMG_9433.webp - 2025-08-02T01:25:10.263Z
POST /api/upload - 2025-08-02T01:25:10.264Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9433.webp'
POST /api/upload - 2025-08-02T01:25:10.329Z
GET /thumbnails/128/IMG_9433.webp - 2025-08-02T01:25:10.533Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_9433.webp'
POST /api/upload - 2025-08-02T01:25:10.716Z
POST /api/upload - 2025-08-02T01:25:11.307Z
GET /thumbnails/512/IMG_9466.webp - 2025-08-02T01:25:11.929Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9466.webp'
POST /api/upload - 2025-08-02T01:25:12.006Z
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:25:12.136Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:25:12.137Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:25:12.142Z
GET /thumbnails/256/IMG_9466.webp - 2025-08-02T01:25:12.143Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9466.webp'
GET /thumbnails/512/IMG_9433.webp - 2025-08-02T01:25:12.147Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9433.webp'
GET /thumbnails/128/IMG_9433.webp - 2025-08-02T01:25:12.334Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_9433.webp'
POST /api/upload - 2025-08-02T01:25:12.449Z
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:25:12.458Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
POST /api/upload - 2025-08-02T01:25:12.593Z
GET /thumbnails/256/IMG_9413.webp - 2025-08-02T01:25:12.663Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9413.webp'
GET /thumbnails/512/IMG_9466.webp - 2025-08-02T01:25:13.013Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9466.webp'
POST /api/upload - 2025-08-02T01:25:13.117Z
GET /thumbnails/256/IMG_9466.webp - 2025-08-02T01:25:13.150Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9466.webp'
POST /api/upload - 2025-08-02T01:25:13.456Z
POST /api/upload - 2025-08-02T01:25:13.632Z
POST /api/upload - 2025-08-02T01:25:13.932Z
GET /thumbnails/512/IMG_9433.webp - 2025-08-02T01:25:14.348Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9433.webp'
POST /api/upload - 2025-08-02T01:25:14.373Z
GET /thumbnails/128/IMG_9433.webp - 2025-08-02T01:25:14.452Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_9433.webp'
POST /api/upload - 2025-08-02T01:25:14.708Z
GET /thumbnails/512/IMG_9466.webp - 2025-08-02T01:25:15.057Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9466.webp'
GET /thumbnails/256/IMG_9466.webp - 2025-08-02T01:25:15.192Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9466.webp'
GET /thumbnails/512/IMG_9433.webp - 2025-08-02T01:25:18.371Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9433.webp'
GET /thumbnails/128/IMG_9433.webp - 2025-08-02T01:25:18.523Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_9433.webp'
GET /thumbnails/512/IMG_9466.webp - 2025-08-02T01:25:19.106Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9466.webp'
GET /thumbnails/256/IMG_9466.webp - 2025-08-02T01:25:19.324Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9466.webp'
GET /canvases - 2025-08-02T01:26:35.380Z
Fetched 2 canvases from database
GET /canvases/1/state - 2025-08-02T01:26:35.386Z
ðŸ“¥ Join request from user-1754094046359-ci2injuxr (tab: 1754097994916-e4uhm8osa) for canvas 1
ðŸ‘¤ Found existing user: user-1754094046359-ci2injuxr (ID: 2)
âœ… user-1754094046359-ci2injuxr (1754097994916-e4uhm8osa) joined canvas Demo Canvas
Error loading canvas state: Error: SQLITE_ERROR: no such column: canvas_id
--> in Database#get('SELECT * FROM canvases WHERE canvas_id = ? ORDER BY updated_at DESC LIMIT 1', [ 2 ], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:229:21
    at new Promise (<anonymous>)
    at Database.get (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:228:16)
    at CanvasStateManager.loadCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:43:42)
    at CanvasStateManager.getCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:29:38)
    at CanvasStateManager.getFullState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:685:34)
    at CollaborationManager.handleRequestFullSync (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:783:55)
    at Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:69:28)
    at Socket.emit (node:events:518:28) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸ”Œ Disconnecting user-1754094046359-ci2injuxr (1754097994916-e4uhm8osa)
GET /canvases - 2025-08-02T01:27:09.381Z
Fetched 2 canvases from database
GET /canvases/1/state - 2025-08-02T01:27:09.386Z
ðŸ“¥ Join request from user-1754094046359-ci2injuxr (tab: 1754098028918-7e3duwokv) for canvas 1
ðŸ‘¤ Found existing user: user-1754094046359-ci2injuxr (ID: 2)
âœ… user-1754094046359-ci2injuxr (1754098028918-7e3duwokv) joined canvas Demo Canvas
GET /api/canvases - 2025-08-02T01:29:10.509Z
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:29:53.446Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:29:54.455Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:29:56.465Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
GET /thumbnails/512/IMG_9462.webp - 2025-08-02T01:30:00.470Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9462.webp'
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:30:05.398Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:30:06.411Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:30:08.417Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:30:09.621Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:30:10.395Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:30:10.632Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:30:11.401Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
GET /thumbnails/512/IMG_9458.webp - 2025-08-02T01:30:12.423Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9458.webp'
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:30:12.606Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
GET /thumbnails/256/IMG_9458.webp - 2025-08-02T01:30:12.643Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9458.webp'
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:30:12.662Z
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:30:12.663Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
GET /thumbnails/512/IMG_9455.webp - 2025-08-02T01:30:13.405Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9455.webp'
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:30:13.528Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:30:13.617Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:30:13.669Z
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:30:13.669Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
GET /thumbnails/256/IMG_9413.webp - 2025-08-02T01:30:13.845Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9413.webp'
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:30:14.533Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
GET /thumbnails/256/IMG_9413.webp - 2025-08-02T01:30:14.851Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9413.webp'
GET /thumbnails/256/IMG_9479.webp - 2025-08-02T01:30:15.621Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9479.webp'
GET /thumbnails/512/IMG_9413.webp - 2025-08-02T01:30:15.674Z
GET /thumbnails/512/IMG_9479.webp - 2025-08-02T01:30:15.674Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9413.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_9479.webp'
GET /thumbnails/256/IMG_9455.webp - 2025-08-02T01:30:16.537Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_9455.webp'
ðŸ”Œ Disconnecting user-1754094046359-ci2injuxr (1754098028918-7e3duwokv)
GET /canvases - 2025-08-02T01:30:17.431Z
Fetched 2 canvases from database
GET /canvases/1/state - 2025-08-02T01:30:17.436Z
ðŸ“¥ Join request from user-1754094046359-ci2injuxr (tab: 1754098216954-9ncydd50q) for canvas 1
ðŸ‘¤ Found existing user: user-1754094046359-ci2injuxr (ID: 2)
âœ… user-1754094046359-ci2injuxr (1754098216954-9ncydd50q) joined canvas Demo Canvas
GET /canvases - 2025-08-02T01:30:17.572Z
Fetched 2 canvases from database
GET /canvases/2/state - 2025-08-02T01:30:17.695Z
ðŸ“¥ Join request from user-1753750894990-6oseyvb79 (tab: 1754098217047-00kjtj6t5) for canvas 2
ðŸ‘¤ Found existing user: user-1753750894990-6oseyvb79 (ID: 3)
âœ… user-1753750894990-6oseyvb79 (1754098217047-00kjtj6t5) joined canvas Demo Canvas
ðŸ”Œ Disconnecting user-1754094046359-ci2injuxr (1754098216954-9ncydd50q)
GET /canvases - 2025-08-02T01:30:23.272Z
Fetched 2 canvases from database
GET /canvases/1/state - 2025-08-02T01:30:23.276Z
ðŸ“¥ Join request from user-1754094046359-ci2injuxr (tab: 1754098222804-n6kiirmb2) for canvas 1
ðŸ‘¤ Found existing user: user-1754094046359-ci2injuxr (ID: 2)
âœ… user-1754094046359-ci2injuxr (1754098222804-n6kiirmb2) joined canvas Demo Canvas
GET /database/size - 2025-08-02T01:30:57.670Z
GET /canvases - 2025-08-02T01:30:57.671Z
Fetched 2 canvases from database
PATCH /canvases/2/state - 2025-08-02T01:30:58.733Z
GET /canvases/1/state - 2025-08-02T01:30:58.736Z
ðŸ“¥ Join request from user-1753750894990-6oseyvb79 (tab: 1754098217047-00kjtj6t5) for canvas 1
ðŸ‘¤ Found existing user: user-1753750894990-6oseyvb79 (ID: 3)
âœ… user-1753750894990-6oseyvb79 (1754098217047-00kjtj6t5) joined canvas Demo Canvas
PATCH /canvases/1/state - 2025-08-02T01:30:59.435Z
GET /canvases/2/state - 2025-08-02T01:30:59.445Z
ðŸ“¥ Join request from user-1753750894990-6oseyvb79 (tab: 1754098217047-00kjtj6t5) for canvas 2
ðŸ‘¤ Found existing user: user-1753750894990-6oseyvb79 (ID: 3)
âœ… user-1753750894990-6oseyvb79 (1754098217047-00kjtj6t5) joined canvas Demo Canvas
GET /canvases - 2025-08-02T01:31:01.112Z
Fetched 2 canvases from database
GET /database/size - 2025-08-02T01:31:06.403Z
GET /canvases - 2025-08-02T01:31:06.403Z
Fetched 2 canvases from database
PATCH /canvases/2/state - 2025-08-02T01:31:13.402Z
GET /canvases - 2025-08-02T01:31:14.077Z
GET /database/size - 2025-08-02T01:31:14.078Z
Fetched 2 canvases from database
PATCH /canvases/2/state - 2025-08-02T01:31:14.967Z
GET /canvases/1/state - 2025-08-02T01:31:14.978Z
ðŸ“¥ Join request from user-1753750894990-6oseyvb79 (tab: 1754098217047-00kjtj6t5) for canvas 1
ðŸ‘¤ Found existing user: user-1753750894990-6oseyvb79 (ID: 3)
âœ… user-1753750894990-6oseyvb79 (1754098217047-00kjtj6t5) joined canvas Demo Canvas
GET /canvases - 2025-08-02T01:31:38.221Z
Fetched 2 canvases from database
GET /canvases - 2025-08-02T01:31:45.840Z
Fetched 2 canvases from database
GET /canvases - 2025-08-02T01:32:15.767Z
Fetched 2 canvases from database
PATCH /canvases/1/state - 2025-08-02T01:32:19.856Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358491-mxrjyxwar',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""}],"version":1}',
  1,
  1754098358493
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358589-e5ddoga4z',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""}],"version":2}',
  2,
  1754098358591
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358608-spxsh7eto',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""}],"version":3}',
  3,
  1754098358609
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358702-4hu3sod8g',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""}],"version":4}',
  4,
  1754098358703
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358716-73tob4hup',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""}],"version":5}',
  5,
  1754098358717
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358794-yfs8ci84w',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""}],"version":6}',
  6,
  1754098358795
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358801-luc9bib0i',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""}],"version":7}',
  7,
  1754098358801
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358901-iw2v31i6z',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""}],"version":8}',
  8,
  1754098358902
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098358930-5a7u6kkot',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""}],"version":9}',
  9,
  1754098358933
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098359079-vbs14l4p0',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""}],"version":10}',
  10,
  1754098359081
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098359117-p8vvnbnx1',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""}],"version":11}',
  11,
  1754098359120
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:39.140Z
POST /api/upload - 2025-08-02T01:32:39.143Z
POST /api/upload - 2025-08-02T01:32:39.144Z
POST /api/upload - 2025-08-02T01:32:39.145Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098359214-k0rljf69v',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""}],"version":12}',
  12,
  1754098359226
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098359255-93dthmle9',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""}],"version":13}',
  13,
  1754098359307
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098359327-3mioy6x6d',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""}],"version":14}',
  14,
  1754098359391
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098359505-olbkv4it0',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""}],"version":15}',
  15,
  1754098359743
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:40.292Z
POST /api/upload - 2025-08-02T01:32:40.452Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098360110-uss8yjth7',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""}],"version":16}',
  16,
  1754098360535
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098360623-q5ti1g5uc',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""}],"version":17}',
  17,
  1754098360650
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:40.651Z
POST /api/upload - 2025-08-02T01:32:40.785Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098360663-s7t3ro507',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""}],"version":18}',
  18,
  1754098360785
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098360790-c6ytqlpbd',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""}],"version":19}',
  19,
  1754098360882
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:41.213Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098361122-1j9ouuhxo',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""}],"version":20}',
  20,
  1754098361227
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098361238-30wsa3abv',
  type: 'node_create',
  hasUndoData: true,
  undoDataKeys: [ 'nodeId' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":21}',
  21,
  1754098361324
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098361330-h6dzbv672',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'e0949976',
  serverUrl: '/uploads/1754098359145-esfqf8.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: false, matchesHash: true }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: false, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: false, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash e0949976...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":22}',
  22,
  1754098361334
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098361422-kpo38naqj',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'd586e329',
  serverUrl: '/uploads/1754098359145-gz7xg.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: false, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: false, matchesHash: true }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash d586e329...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":23}',
  23,
  1754098361536
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:41.653Z
POST /api/upload - 2025-08-02T01:32:41.675Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098361888-vqtsllze8',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'd586e329',
  serverUrl: '/uploads/1754098359145-gz7xg.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: false, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: true }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash d586e329 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":24}',
  24,
  1754098362018
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098362023-sswldxw6o',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'f796ec2c',
  serverUrl: '/uploads/1754098359145-pelusn.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: false, matchesHash: true }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash f796ec2c...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":25}',
  25,
  1754098362025
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098362230-wxn8g3q3t',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'f796ec2c',
  serverUrl: '/uploads/1754098359145-pelusn.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: true }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash f796ec2c - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1059.8780552533328,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-831.5447219199996,295.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1059.8780552533328,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-603.2113885866662,295.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-544.8780552533328,515.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-773.2113885866661,515.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-858.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1086.5447219199996,735.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-688.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-518.2113885866662,735.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1086.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-916.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-746.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-576.5447219199996,955.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-773.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1001.5447219199996,1175.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1059.8780552533328,1395.0566195199997],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-603.2113885866662,1175.0566195199997],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-544.8780552533328,1395.0566195199997],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":26}',
  26,
  1754098362327
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:42.328Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098362740-l05nlkegu',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1145.5100672,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1120.5100672,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[900.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[705.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[485.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1560.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[705.5100672000001,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[680.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1145.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[265.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[265.51006720000015,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1365.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[265.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[925.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[1340.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[460.51006720000015,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1365.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1585.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":27}',
  27,
  1754098362825
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:43.040Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098363048-jizqo26lo',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'e0949976',
  serverUrl: '/uploads/1754098360535-mkoi09.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: true }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash e0949976 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1145.5100672,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1120.5100672,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[900.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[705.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[485.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1560.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[705.5100672000001,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[680.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1145.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[265.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[265.51006720000015,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1365.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[265.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[925.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[1340.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[460.51006720000015,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1365.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1585.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":28}',
  28,
  1754098363633
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098363647-uz9kegm0u',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '55ae28f6',
  serverUrl: '/uploads/1754098359147-ebektq.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: false, matchesHash: true }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 55ae28f6...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1145.5100672,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1120.5100672,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[900.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[705.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[485.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1560.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[705.5100672000001,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[680.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1145.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[265.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[265.51006720000015,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1365.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[265.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[925.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[1340.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[460.51006720000015,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1365.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1585.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":29}',
  29,
  1754098363868
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098363888-rynck55lq',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '55ae28f6',
  serverUrl: '/uploads/1754098359147-ebektq.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: true }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash 55ae28f6 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1145.5100672,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1120.5100672,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[900.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[705.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[485.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1560.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[705.5100672000001,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[680.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1145.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[265.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[265.51006720000015,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1365.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[265.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[925.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[1340.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[460.51006720000015,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1365.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1585.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":30}',
  30,
  1754098364199
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098364238-ebo0d3mm1',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'c18c7e6f',
  serverUrl: '/uploads/1754098361227-8pjlpi.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: false, matchesHash: true }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash c18c7e6f...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1145.5100672,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1120.5100672,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[900.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[705.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[485.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1560.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[705.5100672000001,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[680.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1145.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[265.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[265.51006720000015,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1365.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[265.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[925.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[1340.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[460.51006720000015,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1365.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1585.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":31}',
  31,
  1754098364399
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098364453-fwy1qy05v',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'c18c7e6f',
  serverUrl: '/uploads/1754098361227-8pjlpi.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: true }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash c18c7e6f - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1145.5100672,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1120.5100672,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[900.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[705.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[485.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1560.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[705.5100672000001,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[680.5100672000001,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1145.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[265.51006720000015,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[265.51006720000015,994.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1365.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[265.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[925.5100672000001,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.51006720000015,774.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[1340.5100672,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[460.51006720000015,1019.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1365.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1585.5100672,554.7787673599998],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[900.5100672000001,799.7787673599998],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1585.5100672,774.7787673599998],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":32}',
  32,
  1754098364841
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:45.088Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098364855-xikn8it4l',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
POST /api/upload - 2025-08-02T01:32:45.145Z
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-413.86101247999966,917.38206208],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[881.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[661.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[466.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[26.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1.1389875200003416,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[26.13898752000034,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[221.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[906.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-413.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-413.86101247999966,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1126.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-193.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[686.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[246.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-218.86101247999966,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-218.86101247999966,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1126.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1346.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[441.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1346.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":33}',
  33,
  1754098365144
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:45.190Z
POST /api/upload - 2025-08-02T01:32:45.249Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098365283-mmaxqn7md',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '553981f6',
  serverUrl: '/uploads/1754098360534-0y6fpb.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: false, matchesHash: true }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 553981f6...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-413.86101247999966,917.38206208],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[881.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[661.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[466.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[26.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1.1389875200003416,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[26.13898752000034,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[221.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[906.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-413.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-413.86101247999966,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1126.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-193.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[686.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[246.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-218.86101247999966,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-218.86101247999966,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1126.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1346.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[441.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1346.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":34}',
  34,
  1754098365329
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098365354-f2xfghkld',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '553981f6',
  serverUrl: '/uploads/1754098360534-0y6fpb.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: true }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash 553981f6 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-413.86101247999966,917.38206208],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[881.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[661.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[466.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[26.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1.1389875200003416,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[26.13898752000034,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[221.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[906.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-413.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-413.86101247999966,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1126.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-193.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[686.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[246.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-218.86101247999966,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-218.86101247999966,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1126.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1346.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[441.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1346.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":35}',
  35,
  1754098365380
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098365556-drsq96cw7',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '5234b301',
  serverUrl: '/uploads/1754098360651-sdi2j4.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: false, matchesHash: true }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 5234b301...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-413.86101247999966,917.38206208],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[881.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[661.1389875200003,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[466.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[26.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[1.1389875200003416,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[26.13898752000034,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[221.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[906.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-413.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-413.86101247999966,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1126.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-193.86101247999966,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[686.1389875200003,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[246.13898752000034,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-218.86101247999966,942.38206208],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-218.86101247999966,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1126.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1346.1389875200002,477.3820620799999],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[441.13898752000034,722.38206208],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1346.1389875200002,697.38206208],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":36}',
  36,
  1754098365764
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:46.167Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098366157-px4e3z267',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":37}',
  37,
  1754098367131
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
PATCH /canvases/1/state - 2025-08-02T01:32:47.566Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098368221-9v24e9p9k',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '724b09dc',
  serverUrl: '/uploads/1754098361879-bx3qg.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: false, matchesHash: true }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 724b09dc...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":38}',
  38,
  1754098368328
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098368355-cpg7juzap',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '724b09dc',
  serverUrl: '/uploads/1754098361879-bx3qg.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: true }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash 724b09dc - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":39}',
  39,
  1754098368534
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:48.592Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098368571-q0jmi42ue',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'e505849c',
  serverUrl: '/uploads/1754098360786-ibxa.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: false, matchesHash: true }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash e505849c...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":40}',
  40,
  1754098368634
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:48.636Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098368666-35yophapq',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '1fbac5de',
  serverUrl: '/uploads/1754098361880-gnxxbd.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: false, matchesHash: true }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 1fbac5de...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":41}',
  41,
  1754098368748
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098368771-qs99ii5x0',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '1fbac5de',
  serverUrl: '/uploads/1754098361880-gnxxbd.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: true }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash 1fbac5de - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":42}',
  42,
  1754098368828
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098368908-0js51rm3a',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '44a998c9',
  serverUrl: '/uploads/1754098362733-ezq2t5.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: false, matchesHash: true }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 44a998c9...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":43}',
  43,
  1754098368958
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:32:49.398Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369199-qnywexedu',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '44a998c9',
  serverUrl: '/uploads/1754098362733-ezq2t5.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: true }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash 44a998c9 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-174.5793719490501,1490.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[460.42062805094986,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[460.42062805094986,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[45.42062805094989,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-174.5793719490501,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[240.4206280509499,635.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[240.4206280509499,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-174.5793719490501,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[485.42062805094986,390.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[45.42062805094989,1270.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-174.5793719490501,1050.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[45.42062805094989,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[45.42062805094989,610.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[485.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[240.4206280509499,1075.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-199.5793719490501,1295.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-174.5793719490501,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[265.42062805094986,830.4485908308377],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[240.4206280509499,415.4485908308377],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[485.42062805094986,610.4485908308377],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":44}',
  44,
  1754098369406
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:49.407Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:32:49.439Z
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:32:49.473Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369413-c3gduy3i8',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":45}',
  45,
  1754098369477
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:32:49.479Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:32:49.479Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:32:49.480Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369480-qxv8togv4',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '4d25ad97',
  serverUrl: '/uploads/1754098365224-x02pk.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: false, matchesHash: true }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 4d25ad97...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":46}',
  46,
  1754098369481
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369488-9v7zrwz38',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '65aa3175',
  serverUrl: '/uploads/1754098363042-x72sdt.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: false, matchesHash: true }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 65aa3175...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":47}',
  47,
  1754098369635
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:49.636Z
POST /api/upload - 2025-08-02T01:32:49.755Z
PATCH /canvases/1/state - 2025-08-02T01:32:49.770Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369736-z2qpv3kbt',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '65aa3175',
  serverUrl: '/uploads/1754098363042-x72sdt.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: true }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
âš ï¸ No nodes updated for hash 65aa3175 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":48}',
  48,
  1754098369806
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:49.816Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369830-1sqi3fza9',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'b22ef939',
  serverUrl: '/uploads/1754098365143-mrm72.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: false, matchesHash: true }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash b22ef939...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":49}',
  49,
  1754098369865
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:32:49.866Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098369938-e0tdmd3gb',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'd9b84152',
  serverUrl: '/uploads/1754098365251-2pix48.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: false, matchesHash: true }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash d9b84152...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":50}',
  50,
  1754098370516
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098370522-uwcgw0smc',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '328cb84f',
  serverUrl: '/uploads/1754098367130-0phf9u.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: false, matchesHash: true }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 328cb84f...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":51}',
  51,
  1754098370525
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098370533-71fncz7lo',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '7853edf4',
  serverUrl: '/uploads/1754098368632-dhg8pb.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: false, matchesHash: true }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 7853edf4...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":52}',
  52,
  1754098370537
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098370547-gyqzv3hix',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '24a13845',
  serverUrl: '/uploads/1754098365223-g1sg9d.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: false, matchesHash: true }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 24a13845...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null},"rotation":0,"flags":{},"title":""}],"version":53}',
  53,
  1754098370682
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:50.704Z
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:32:50.710Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:32:50.717Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:32:50.718Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:32:50.727Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:32:50.727Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:32:50.729Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:32:50.730Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:32:50.732Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:32:50.732Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098370789-jgjgqx5c5',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '90d6e224',
  serverUrl: '/uploads/1754098369719-ttvu6f.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: false, matchesHash: true }
ðŸ“ Image upload complete: Updated 1 nodes with hash 90d6e224...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":54}',
  54,
  1754098370791
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:50.906Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:32:50.939Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098371047-hwxgi79z2',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '9d4c80a8',
  serverUrl: '/uploads/1754098368637-0ijr9d.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: false, matchesHash: true }
  Image node 21: { hash: '90d6e224', hasServerUrl: true, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 9d4c80a8...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":55}',
  55,
  1754098371048
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
POST /api/upload - 2025-08-02T01:32:51.076Z
POST /api/upload - 2025-08-02T01:32:51.085Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098371148-9yj1gus6e',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '38373b67',
  serverUrl: '/uploads/1754098369408-ed2ebr.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: false, matchesHash: true }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: true, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: true, matchesHash: false }
ðŸ“ Image upload complete: Updated 1 nodes with hash 38373b67...
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":56}',
  56,
  1754098371266
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:32:51.723Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:32:51.739Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:32:51.739Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:32:51.824Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:32:51.824Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:32:51.824Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098371788-cyqk55nz1',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: 'c18c7e6f',
  serverUrl: '/uploads/1754098370708-2kulkf.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: true }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: true, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: true, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: true, matchesHash: false }
âš ï¸ No nodes updated for hash c18c7e6f - all already have serverUrl or hash mismatch
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":57}',
  57,
  1754098371895
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:32:51.896Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:32:51.915Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:32:51.916Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:32:51.916Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
PATCH /canvases/1/state - 2025-08-02T01:32:52.472Z
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:32:52.474Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:32:52.475Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:52.475Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
PATCH /canvases/1/state - 2025-08-02T01:32:52.479Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:32:52.481Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:32:52.481Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:32:52.482Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:32:52.483Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:32:52.484Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:32:52.484Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:32:52.485Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:32:52.485Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:32:52.487Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:32:52.489Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:32:52.490Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:32:52.491Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:52.492Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:32:52.493Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:32:52.494Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:32:52.495Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098372704-kcb738vx6',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '4d25ad97',
  serverUrl: '/uploads/1754098371262-nqnk5.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: true }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: true, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: true, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: true, matchesHash: false }
âš ï¸ No nodes updated for hash 4d25ad97 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":58}',
  58,
  1754098372705
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:32:52.740Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:32:52.741Z
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:32:52.741Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:32:52.741Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:32:52.741Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:32:52.744Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098372811-zj6wl5vhc',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '55ae28f6',
  serverUrl: '/uploads/1754098369805-ahqlpn.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: true }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: false }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: true, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: true, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: true, matchesHash: false }
âš ï¸ No nodes updated for hash 55ae28f6 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":59}',
  59,
  1754098372812
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:32:52.895Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:32:52.896Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:32:52.896Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:32:52.899Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:52.930Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:32:53.049Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:32:53.476Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:32:53.476Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:32:53.476Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:32:53.484Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:32:53.484Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:53.484Z
PATCH /canvases/1/state - 2025-08-02T01:32:53.484Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:32:53.490Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:32:53.491Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:32:53.491Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:32:53.491Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:32:53.492Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:32:53.492Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:32:53.494Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:32:53.495Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:32:53.495Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:32:53.500Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:32:53.501Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:32:53.501Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:53.501Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:32:53.501Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:32:53.501Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:32:53.504Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098373550-2jh16lcqi',
  type: 'image_upload_complete',
  hasUndoData: false,
  undoDataKeys: null,
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
ðŸ” Processing image_upload_complete: {
  hash: '65aa3175',
  serverUrl: '/uploads/1754098371262-nvlhwp.jpeg',
  totalNodes: 21,
  imageNodes: 21
}
  Image node 1: { hash: 'e0949976', hasServerUrl: true, matchesHash: false }
  Image node 2: { hash: 'f796ec2c', hasServerUrl: true, matchesHash: false }
  Image node 4: { hash: 'd586e329', hasServerUrl: true, matchesHash: false }
  Image node 3: { hash: '55ae28f6', hasServerUrl: true, matchesHash: false }
  Image node 6: { hash: '1fbac5de', hasServerUrl: true, matchesHash: false }
  Image node 5: { hash: '553981f6', hasServerUrl: true, matchesHash: false }
  Image node 8: { hash: 'c18c7e6f', hasServerUrl: true, matchesHash: false }
  Image node 7: { hash: '724b09dc', hasServerUrl: true, matchesHash: false }
  Image node 9: { hash: '44a998c9', hasServerUrl: true, matchesHash: false }
  Image node 10: { hash: '65aa3175', hasServerUrl: true, matchesHash: true }
  Image node 11: { hash: '5234b301', hasServerUrl: true, matchesHash: false }
  Image node 12: { hash: 'e505849c', hasServerUrl: true, matchesHash: false }
  Image node 13: { hash: '4d25ad97', hasServerUrl: true, matchesHash: false }
  Image node 14: { hash: '24a13845', hasServerUrl: true, matchesHash: false }
  Image node 16: { hash: 'd9b84152', hasServerUrl: true, matchesHash: false }
  Image node 15: { hash: 'b22ef939', hasServerUrl: true, matchesHash: false }
  Image node 18: { hash: '7853edf4', hasServerUrl: true, matchesHash: false }
  Image node 17: { hash: '328cb84f', hasServerUrl: true, matchesHash: false }
  Image node 20: { hash: '38373b67', hasServerUrl: true, matchesHash: false }
  Image node 19: { hash: '9d4c80a8', hasServerUrl: true, matchesHash: false }
  Image node 21: { hash: '90d6e224', hasServerUrl: true, matchesHash: false }
âš ï¸ No nodes updated for hash 65aa3175 - all already have serverUrl or hash mismatch
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-315.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":60}',
  60,
  1754098373551
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:32:53.739Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:32:53.741Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:32:53.742Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:32:54.901Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:32:54.901Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:32:54.902Z
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:32:54.902Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:32:55.482Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:32:55.483Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:32:55.483Z
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:32:55.489Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:32:55.490Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:55.497Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:32:55.497Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:32:55.498Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:32:55.498Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:32:55.498Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:32:55.498Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:32:55.500Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:32:55.500Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:32:55.500Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:32:55.501Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:32:55.514Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:32:55.516Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:32:55.516Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:55.522Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:32:55.522Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:32:55.522Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:32:55.525Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:32:56.750Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:32:56.751Z
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:32:56.752Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:32:56.752Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:32:56.752Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:32:56.752Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:56.934Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:56.957Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:32:57.054Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:32:57.132Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:32:57.182Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:32:57.743Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:32:57.745Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:32:57.745Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:32:57.827Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:32:57.827Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:32:57.827Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:57.963Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:32:58.137Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:32:58.186Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:32:58.835Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:32:58.837Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:32:58.837Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:32:58.907Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:32:58.908Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:32:58.909Z
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:32:58.909Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:32:59.489Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:32:59.490Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:32:59.491Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:32:59.497Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:32:59.498Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:59.500Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:32:59.500Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:32:59.500Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:32:59.502Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:32:59.502Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:32:59.502Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:32:59.502Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:32:59.503Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:32:59.505Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:32:59.505Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:32:59.532Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:32:59.532Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:32:59.532Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:32:59.532Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:32:59.532Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:32:59.533Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:32:59.535Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:32:59.974Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:00.143Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:00.193Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:00.842Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:00.844Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:00.845Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:03.979Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:04.008Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:04.147Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:04.194Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:04.196Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:04.855Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:04.856Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:04.856Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:04.892Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:04.893Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:04.893Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:05.014Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:05.198Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:05.215Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:05.899Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:05.900Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:05.900Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:06.222Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:07.018Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:07.205Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:07.912Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:07.913Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:07.913Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:08.231Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /canvases - 2025-08-02T01:33:09.022Z
Fetched 2 canvases from database
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:11.023Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:11.091Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:11.209Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:11.358Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:11.921Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:11.923Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:11.923Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:12.033Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:12.033Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:12.033Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:12.100Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:12.239Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:12.361Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:13.042Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:13.043Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:13.043Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:13.275Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:13.325Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:13.325Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:13.325Z
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:33:13.326Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:13.417Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:13.417Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:13.417Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:33:13.449Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:13.449Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:13.450Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:13.466Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:13.466Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:13.467Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:13.467Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:13.468Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:13.468Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:13.470Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:13.470Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:13.470Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:13.471Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:13.471Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:13.471Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:13.474Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:13.474Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:13.474Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:13.475Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:13.491Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:13.491Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:13.491Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:13.491Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
PATCH /canvases/1/state - 2025-08-02T01:33:13.518Z
PATCH /canvases/1/state - 2025-08-02T01:33:13.769Z
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:14.105Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:14.279Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:14.330Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:14.330Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:14.331Z
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:33:14.331Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:14.371Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:14.422Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:14.422Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:14.422Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:33:14.456Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:14.457Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:14.457Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:14.472Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:14.474Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:14.474Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:14.475Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:14.475Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:14.475Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:14.477Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:14.477Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:14.478Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:14.478Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:14.478Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:14.478Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:14.480Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:14.481Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:14.481Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:14.481Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:14.493Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:14.494Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:14.494Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:14.496Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:15.053Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:15.053Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:15.054Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:16.288Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:16.338Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:16.339Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:16.340Z
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:33:16.341Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:16.427Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:16.428Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:16.428Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:33:16.461Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:16.462Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:16.462Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:16.477Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:16.478Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:16.478Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:16.478Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:16.478Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:16.478Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:16.496Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:16.496Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:16.497Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:16.498Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:16.499Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:16.499Z
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:16.501Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:16.502Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:16.502Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:16.502Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:16.503Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:16.503Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:16.504Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:16.505Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:18.109Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:18.377Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:19.062Z
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:19.063Z
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:19.063Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:20.293Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:20.352Z
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:20.353Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:20.354Z
GET /thumbnails/2048/IMG_7175.webp - 2025-08-02T01:33:20.355Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7175.webp'
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:20.437Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:20.438Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:20.438Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7202.webp - 2025-08-02T01:33:20.471Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:20.472Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:20.472Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:20.488Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:20.488Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:20.489Z
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:20.489Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:20.490Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:20.490Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:20.504Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:20.504Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:20.505Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:20.505Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:20.505Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:20.505Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:20.507Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:20.507Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:20.507Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:20.511Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:20.511Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:20.511Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:20.512Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:20.512Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098406451-kr050feup',
  type: 'node_move',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions', 'nodes' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-535.2190551955305,1260.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[99.78094480446953,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[319.7809448044695,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-95.21905519553047,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-535.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[99.78094480446953,625.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[45.42062805094989,1052.419299482458],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-120.21905519553047,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-315.2190551955305,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[344.7809448044695,380.59504757273714],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-315.2190551955305,1040.5950475727373],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-535.2190551955305,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-95.21905519553047,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-315.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[344.7809448044695,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[99.78094480446953,845.5950475727371],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-560.2190551955305,1065.5950475727373],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-535.2190551955305,600.5950475727371],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-95.21905519553047,820.5950475727371],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[99.78094480446953,405.59504757273714],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[344.7809448044695,600.5950475727371],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":61}',
  61,
  1754098406453
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:26.589Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:26.622Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:26.773Z
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:26.774Z
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:26.775Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:26.775Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:26.777Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
PATCH /canvases/1/state - 2025-08-02T01:33:26.958Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:27.592Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:27.625Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:27.778Z
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:27.779Z
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:27.783Z
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:27.783Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:27.784Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:33:28.941Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:28.942Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:28.943Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:28.944Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:28.944Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
PATCH /canvases/1/state - 2025-08-02T01:33:29.061Z
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:29.598Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:29.640Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:29.791Z
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:29.791Z
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:29.791Z
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:29.791Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:29.792Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:33:29.950Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:29.950Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:29.950Z
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:29.951Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:29.951Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
PATCH /canvases/1/state - 2025-08-02T01:33:30.397Z
GET /thumbnails/2048/IMG_7251.webp - 2025-08-02T01:33:31.024Z
GET /thumbnails/2048/IMG_7200.webp - 2025-08-02T01:33:31.025Z
GET /thumbnails/2048/IMG_7199.webp - 2025-08-02T01:33:31.025Z
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:31.025Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:31.025Z
GET /thumbnails/2048/IMG_7189.webp - 2025-08-02T01:33:31.026Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7189.webp'
GET /thumbnails/2048/IMG_7181.webp - 2025-08-02T01:33:31.028Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:31.028Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:31.030Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:31.089Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:31.090Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:31.090Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:31.115Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:31.158Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:31.158Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:31.158Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:31.159Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:31.159Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:31.160Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:31.163Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:31.163Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:31.163Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:31.164Z
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:31.164Z
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:31.164Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:31.166Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:31.166Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:31.172Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
PATCH /canvases/1/state - 2025-08-02T01:33:31.218Z
PATCH /canvases/1/state - 2025-08-02T01:33:31.469Z
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:33:31.954Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:31.956Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:31.956Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:31.962Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:31.962Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
GET /thumbnails/2048/IMG_7251.webp - 2025-08-02T01:33:32.036Z
GET /thumbnails/2048/IMG_7200.webp - 2025-08-02T01:33:32.038Z
GET /thumbnails/2048/IMG_7199.webp - 2025-08-02T01:33:32.038Z
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:32.039Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:32.039Z
GET /thumbnails/2048/IMG_7189.webp - 2025-08-02T01:33:32.039Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7189.webp'
GET /thumbnails/2048/IMG_7181.webp - 2025-08-02T01:33:32.041Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:32.042Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:32.042Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:32.095Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:32.096Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:32.096Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:32.118Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:32.169Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:32.170Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:32.170Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:32.171Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:32.171Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:32.171Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:32.175Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:32.175Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:32.176Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:32.176Z
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:32.177Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:32.177Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:32.178Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:32.178Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:32.178Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
GET /thumbnails/1024/IMG_7246.webp - 2025-08-02T01:33:33.602Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7246.webp'
GET /thumbnails/2048/IMG_7246.webp - 2025-08-02T01:33:33.644Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7246.webp'
GET /thumbnails/2048/IMG_7261.webp - 2025-08-02T01:33:33.796Z
GET /thumbnails/2048/IMG_7260.webp - 2025-08-02T01:33:33.797Z
GET /thumbnails/2048/IMG_7256.webp - 2025-08-02T01:33:33.797Z
GET /thumbnails/2048/IMG_7259.webp - 2025-08-02T01:33:33.797Z
GET /thumbnails/2048/IMG_7252.webp - 2025-08-02T01:33:33.798Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7252.webp'
GET /thumbnails/2048/IMG_7251.webp - 2025-08-02T01:33:34.044Z
GET /thumbnails/2048/IMG_7200.webp - 2025-08-02T01:33:34.044Z
GET /thumbnails/2048/IMG_7199.webp - 2025-08-02T01:33:34.044Z
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:34.044Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:34.044Z
GET /thumbnails/2048/IMG_7189.webp - 2025-08-02T01:33:34.044Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7189.webp'
GET /thumbnails/2048/IMG_7181.webp - 2025-08-02T01:33:34.056Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:34.056Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:34.056Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:34.102Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:34.102Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:34.102Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:34.126Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098414167-ove0gdktk',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[2030.4206280509497,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[760.4206280509497,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[1370.4206280509497,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1719.5793719490503,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-1549.5793719490503,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-479.57937194905026,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[590.4206280509497,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[1590.4206280509497,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-989.5793719490503,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-1379.5793719490503,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[1200.4206280509497,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[420.42062805094974,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-259.57937194905026,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-819.5793719490503,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-89.57937194905026,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[980.4206280509497,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[1810.4206280509497,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[80.42062805094974,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[250.42062805094974,870.3043388618673],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-1209.5793719490503,870.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-649.5793719490503,870.3043388618673],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":62}',
  62,
  1754098414169
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:34.177Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:34.177Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:34.178Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:34.178Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:34.178Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:34.184Z
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:34.185Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:34.185Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:34.185Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:34.185Z
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:34.185Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:34.201Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:34.202Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:34.202Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:34.202Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098415025-9a15tvio5',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[92.32538995571164,2895.304338861867],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[92.32538995571164,1825.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[92.32538995571164,2385.304338861867],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[92.32538995571164,-1154.6956611381327],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[92.32538995571164,-934.6956611381327],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[92.32538995571164,335.30433886186734],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[92.32538995571164,1605.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[92.32538995571164,2555.304338861867],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[92.32538995571164,-324.69566113813266],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[92.32538995571164,-714.6956611381327],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[92.32538995571164,2165.304338861867],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[92.32538995571164,1385.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[92.32538995571164,505.30433886186734],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[92.32538995571164,-104.69566113813266],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[92.32538995571164,725.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[92.32538995571164,1995.3043388618673],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[92.32538995571164,2725.304338861867],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[92.32538995571164,945.3043388618673],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[92.32538995571164,1165.3043388618673],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[92.32538995571164,-494.69566113813266],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[92.32538995571164,115.30433886186734],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":63}',
  63,
  1754098415026
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098415751-ei57ggkta',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1992.3253899557117,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[722.3253899557117,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[1332.3253899557117,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1757.6746100442883,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-1587.6746100442883,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-517.6746100442883,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[552.3253899557117,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[1552.3253899557117,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-1027.6746100442883,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-1417.6746100442883,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[1162.3253899557117,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[382.32538995571167,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-297.67461004428833,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-857.6746100442883,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-127.67461004428833,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[942.3253899557117,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[1772.3253899557117,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[42.32538995571167,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[212.32538995571167,933.3995769571054],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-1247.6746100442883,933.3995769571054],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-687.6746100442883,933.3995769571054],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":64}',
  64,
  1754098415753
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/1024/IMG_7261.webp - 2025-08-02T01:33:35.960Z
GET /thumbnails/1024/IMG_7260.webp - 2025-08-02T01:33:35.960Z
GET /thumbnails/1024/IMG_7256.webp - 2025-08-02T01:33:35.960Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7256.webp'
GET /thumbnails/1024/IMG_7259.webp - 2025-08-02T01:33:35.976Z
GET /thumbnails/1024/IMG_7252.webp - 2025-08-02T01:33:35.976Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7252.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098417025-jmhgt6r8h',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[434.182203108827,1418.2517397023462],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[409.182203108827,783.2517397023461],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[189.18220310882703,1223.2517397023462],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-225.81779689117297,1638.2517397023462],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5.817796891172975,1418.2517397023462],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-30.817796891172975,783.2517397023461],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[214.18220310882703,758.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[409.182203108827,1223.2517397023462],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-225.81779689117297,1198.2517397023462],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-225.81779689117297,1418.2517397023462],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[434.182203108827,978.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[434.182203108827,538.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-225.81779689117297,538.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5.817796891172975,978.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-225.81779689117297,758.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[189.18220310882703,1003.2517397023461],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[189.18220310882703,1443.2517397023462],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5.817796891172975,538.2517397023461],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[214.18220310882703,538.2517397023461],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-30.817796891172975,1223.2517397023462],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-225.81779689117297,978.2517397023461],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":65}',
  65,
  1754098417026
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098417850-kwdjkh6md',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[1261.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-738.317796891173,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[601.682203108827,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[1991.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[1431.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-518.317796891173,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-1078.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[821.682203108827,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[431.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[1601.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-298.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-1758.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-1588.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-128.31779689117297,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-908.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[211.68220310882703,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[1771.682203108827,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-1418.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-1248.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[1041.682203108827,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[41.682203108827025,1018.0136444642509],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":66}',
  66,
  1754098417851
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/2048/IMG_7251.webp - 2025-08-02T01:33:38.054Z
GET /thumbnails/2048/IMG_7200.webp - 2025-08-02T01:33:38.055Z
GET /thumbnails/2048/IMG_7199.webp - 2025-08-02T01:33:38.055Z
GET /thumbnails/2048/IMG_7193.webp - 2025-08-02T01:33:38.055Z
GET /thumbnails/2048/IMG_7183.webp - 2025-08-02T01:33:38.056Z
GET /thumbnails/2048/IMG_7189.webp - 2025-08-02T01:33:38.056Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7189.webp'
GET /thumbnails/2048/IMG_7181.webp - 2025-08-02T01:33:38.070Z
GET /thumbnails/2048/IMG_7182.webp - 2025-08-02T01:33:38.071Z
GET /thumbnails/2048/IMG_2860.webp - 2025-08-02T01:33:38.071Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_2860.webp'
GET /thumbnails/2048/IMG_7207.webp - 2025-08-02T01:33:38.113Z
GET /thumbnails/2048/IMG_7192.webp - 2025-08-02T01:33:38.113Z
GET /thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:38.114Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/2048/IMG_7253.webp - 2025-08-02T01:33:38.129Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/2048/IMG_7253.webp'
GET /thumbnails/1024/IMG_7253.webp - 2025-08-02T01:33:38.187Z
GET /thumbnails/1024/IMG_7251.webp - 2025-08-02T01:33:38.188Z
GET /thumbnails/1024/IMG_7207.webp - 2025-08-02T01:33:38.189Z
GET /thumbnails/1024/IMG_7200.webp - 2025-08-02T01:33:38.189Z
GET /thumbnails/1024/IMG_7199.webp - 2025-08-02T01:33:38.189Z
GET /thumbnails/1024/IMG_7193.webp - 2025-08-02T01:33:38.190Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7193.webp'
GET /thumbnails/1024/IMG_7183.webp - 2025-08-02T01:33:38.195Z
GET /thumbnails/1024/IMG_7189.webp - 2025-08-02T01:33:38.196Z
GET /thumbnails/1024/IMG_7192.webp - 2025-08-02T01:33:38.196Z
GET /thumbnails/1024/IMG_7181.webp - 2025-08-02T01:33:38.196Z
GET /thumbnails/1024/IMG_7182.webp - 2025-08-02T01:33:38.196Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7182.webp'
GET /thumbnails/1024/IMG_2860.webp - 2025-08-02T01:33:38.212Z
GET /thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:33:38.213Z
GET /thumbnails/1024/IMG_7202.webp - 2025-08-02T01:33:38.213Z
GET /thumbnails/1024/IMG_7175.webp - 2025-08-02T01:33:38.214Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/1024/IMG_7175.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098418825-1rr4hanjo',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1028.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[921.682203108827,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-418.317796891173,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1758.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-1198.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[701.682203108827,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[1311.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-638.317796891173,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-198.31779689117297,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-1368.317796891173,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[531.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[1991.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[1821.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[361.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[1141.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-28.317796891172975,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-1588.317796891173,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1651.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[1481.682203108827,1018.0136444642509],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-858.317796891173,1018.0136444642509],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[191.68220310882703,1018.0136444642509],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":67}',
  67,
  1754098418827
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098419475-azuplvtlw',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[144.06315548977932,-176.98635553574923],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[144.06315548977932,1773.0136444642508],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[144.06315548977932,383.0136444642508],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[144.06315548977932,-1006.9863555357492],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[144.06315548977932,-396.9863555357492],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[144.06315548977932,1603.0136444642508],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[144.06315548977932,2163.013644464251],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[144.06315548977932,213.01364446425077],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[144.06315548977932,553.0136444642508],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[144.06315548977932,-616.9863555357492],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[144.06315548977932,1383.0136444642508],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[144.06315548977932,3043.013644464251],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[144.06315548977932,2823.013644464251],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[144.06315548977932,1163.0136444642508],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[144.06315548977932,1943.0136444642508],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[144.06315548977932,773.0136444642508],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[144.06315548977932,-786.9863555357492],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[144.06315548977932,2603.013644464251],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[144.06315548977932,2383.013644464251],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[144.06315548977932,43.013644464250774],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[144.06315548977932,943.0136444642508],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":68}',
  68,
  1754098419477
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098421217-989nl7bth',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[135.35385704402256,948.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[550.3538570440226,533.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-109.64614295597744,533.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[355.35385704402256,948.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[795.3538570440226,728.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-109.64614295597744,753.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[135.35385704402256,728.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[330.35385704402256,533.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-304.64614295597744,508.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[1015.3538570440226,948.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[355.35385704402256,728.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[575.3538570440226,948.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[575.3538570440226,728.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[795.3538570440226,508.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-304.64614295597744,948.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[110.35385704402256,533.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[770.3538570440226,973.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1015.3538570440226,728.6911099280444],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-84.64614295597744,948.6911099280444],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[990.3538570440226,533.6911099280444],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-304.64614295597744,728.6911099280444],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":69}',
  69,
  1754098421218
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098423234-qacrsddja',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[22.304094920223747,604.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[437.30409492022375,629.5364648759773],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-442.69590507977625,409.53646487597734],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[462.30409492022375,384.53646487597734],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-417.69590507977625,1044.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-442.69590507977625,629.5364648759773],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-197.69590507977625,604.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-2.695905079776253,409.53646487597734],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-637.6959050797763,384.53646487597734],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[242.30409492022375,824.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[242.30409492022375,384.53646487597734],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-637.6959050797763,1044.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-197.69590507977625,824.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[462.30409492022375,824.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-637.6959050797763,824.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-222.69590507977625,409.53646487597734],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[217.30409492022375,629.5364648759773],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[22.304094920223747,824.5364648759773],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-417.69590507977625,824.5364648759773],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-222.69590507977625,1069.5364648759773],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-637.6959050797763,604.5364648759773],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":70}',
  70,
  1754098423235
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /canvases - 2025-08-02T01:34:39.443Z
Fetched 2 canvases from database
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098500732-jgaaaf3d9',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-597.0303923772065,779.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[257.96960762279355,804.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-622.0303923772065,364.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-157.03039237720645,339.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-817.0303923772065,779.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-182.03039237720645,804.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[282.96960762279355,339.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[37.969607622793546,584.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-817.0303923772065,339.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-597.0303923772065,999.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-377.03039237720645,559.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-377.03039237720645,999.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-817.0303923772065,999.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[282.96960762279355,559.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[62.969607622793546,339.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-402.03039237720645,364.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-402.03039237720645,804.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[62.969607622793546,779.2101658887148],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-597.0303923772065,559.2101658887148],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-182.03039237720645,584.2101658887148],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-817.0303923772065,559.2101658887148],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":71}',
  71,
  1754098500734
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098503223-g9g198ajy',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1229.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[1230.4696076227938,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1449.5303923772062,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[500.4696076227938,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-2129.530392377206,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[60.469607622793774,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[1450.4696076227938,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[670.4696076227938,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-1959.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-1059.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-279.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-109.53039237720623,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-1789.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[1620.4696076227938,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[890.4696076227938,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-719.5303923772062,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-499.5303923772062,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[1060.4696076227938,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-889.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[280.4696076227938,630.4006420791911],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-1619.5303923772062,630.4006420791911],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":72}',
  72,
  1754098503224
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098504373-5zbc4hxsj',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[720.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-1789.5303923772062,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[890.4696076227938,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1009.5303923772062,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[1620.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-619.5303923772062,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-1959.5303923772062,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1229.5303923772062,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[1450.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[550.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-229.53039237720623,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-399.5303923772062,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[1280.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-2129.530392377206,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-1399.5303923772062,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[160.46960762279377,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-59.530392377206226,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-1569.5303923772062,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[380.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-839.5303923772062,630.4006420791915],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[1110.4696076227938,630.4006420791915],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":73}',
  73,
  1754098504374
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098217047-00kjtj6t5-1754098505132-pjhegjxfm',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'h8VS__Hz41OaAbYwAAAP'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-241.43515428196812,1605.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-241.43515428196812,-954.5993579208084],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-241.43515428196812,1825.4006420791916],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-241.43515428196812,-174.59935792080842],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-241.43515428196812,2655.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-241.43515428196812,215.40064207919158],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-241.43515428196812,-1174.5993579208084],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-241.43515428196812,-344.5993579208084],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-241.43515428196812,2435.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-241.43515428196812,1385.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-241.43515428196812,605.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-241.43515428196812,385.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-241.43515428196812,2215.4006420791916],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-241.43515428196812,-1394.5993579208084],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-241.43515428196812,-564.5993579208084],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-241.43515428196812,995.4006420791916],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-241.43515428196812,825.4006420791916],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-241.43515428196812,-784.5993579208084],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-241.43515428196812,1165.4006420791916],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-241.43515428196812,45.400642079191584],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-241.43515428196812,1995.4006420791916],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":74}',
  74,
  1754098505133
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸ”Œ Disconnecting user-1753750894990-6oseyvb79 (1754098217047-00kjtj6t5)
GET /canvases - 2025-08-02T01:35:07.551Z
Fetched 2 canvases from database
GET /canvases/1/state - 2025-08-02T01:35:07.719Z
ðŸ“¥ Join request from user-1753750894990-6oseyvb79 (tab: 1754098507032-5155myupw) for canvas 1
ðŸ‘¤ Found existing user: user-1753750894990-6oseyvb79 (ID: 3)
âœ… user-1753750894990-6oseyvb79 (1754098507032-5155myupw) joined canvas Demo Canvas
GET /thumbnails/128/IMG_7261.webp - 2025-08-02T01:35:07.750Z
GET /thumbnails/128/IMG_7260.webp - 2025-08-02T01:35:07.751Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7260.webp'
GET /thumbnails/128/IMG_7256.webp - 2025-08-02T01:35:07.752Z
GET /thumbnails/128/IMG_7259.webp - 2025-08-02T01:35:07.752Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7259.webp'
GET /thumbnails/128/IMG_7252.webp - 2025-08-02T01:35:07.754Z
GET /thumbnails/128/IMG_7253.webp - 2025-08-02T01:35:07.754Z
GET /thumbnails/128/IMG_7246.webp - 2025-08-02T01:35:07.754Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7246.webp'
GET /thumbnails/128/IMG_7251.webp - 2025-08-02T01:35:07.755Z
GET /thumbnails/128/IMG_7207.webp - 2025-08-02T01:35:07.755Z
GET /thumbnails/128/IMG_7202.webp - 2025-08-02T01:35:07.756Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7202.webp'
GET /thumbnails/128/IMG_7200.webp - 2025-08-02T01:35:07.757Z
GET /thumbnails/128/IMG_7199.webp - 2025-08-02T01:35:07.757Z
GET /thumbnails/128/IMG_7193.webp - 2025-08-02T01:35:07.758Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7200.webp'
GET /thumbnails/128/IMG_7192.webp - 2025-08-02T01:35:07.758Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7192.webp'
GET /thumbnails/128/IMG_7183.webp - 2025-08-02T01:35:07.759Z
GET /thumbnails/128/IMG_7189.webp - 2025-08-02T01:35:07.759Z
GET /thumbnails/128/IMG_7181.webp - 2025-08-02T01:35:07.759Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7189.webp'
GET /thumbnails/128/IMG_7182.webp - 2025-08-02T01:35:07.761Z
GET /thumbnails/128/IMG_2860.webp - 2025-08-02T01:35:07.762Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7181.webp'
GET /thumbnails/128/IMG_7175.webp - 2025-08-02T01:35:07.763Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7175.webp'
GET /thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:35:07.766Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:35:08.349Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:35:08.350Z
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:35:08.351Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:35:08.352Z
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:35:08.355Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:35:08.355Z
GET /thumbnails/512/IMG_7252.webp - 2025-08-02T01:35:08.356Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:35:08.356Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:35:08.356Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:35:08.358Z
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:35:08.358Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7252.webp'
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:35:08.359Z
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:35:08.359Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:35:08.360Z
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:35:08.360Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:35:08.361Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:35:08.361Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:35:08.363Z
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:35:08.363Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:35:08.364Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
GET /thumbnails/128/IMG_7261.webp - 2025-08-02T01:35:08.867Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7261.webp'
GET /thumbnails/128/IMG_7260.webp - 2025-08-02T01:35:08.880Z
GET /thumbnails/128/IMG_7256.webp - 2025-08-02T01:35:08.881Z
GET /thumbnails/128/IMG_7259.webp - 2025-08-02T01:35:08.881Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7259.webp'
GET /thumbnails/128/IMG_7252.webp - 2025-08-02T01:35:08.894Z
GET /thumbnails/128/IMG_7253.webp - 2025-08-02T01:35:08.894Z
GET /thumbnails/128/IMG_7246.webp - 2025-08-02T01:35:08.896Z
GET /thumbnails/128/IMG_7251.webp - 2025-08-02T01:35:08.896Z
GET /thumbnails/128/IMG_7207.webp - 2025-08-02T01:35:08.897Z
GET /thumbnails/128/IMG_7202.webp - 2025-08-02T01:35:08.897Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7202.webp'
GET /thumbnails/128/IMG_7200.webp - 2025-08-02T01:35:08.900Z
GET /thumbnails/128/IMG_7199.webp - 2025-08-02T01:35:08.900Z
GET /thumbnails/128/IMG_7193.webp - 2025-08-02T01:35:08.900Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7193.webp'
GET /thumbnails/128/IMG_7192.webp - 2025-08-02T01:35:08.942Z
GET /thumbnails/128/IMG_7183.webp - 2025-08-02T01:35:08.943Z
GET /thumbnails/128/IMG_7189.webp - 2025-08-02T01:35:08.944Z
GET /thumbnails/128/IMG_7181.webp - 2025-08-02T01:35:08.944Z
GET /thumbnails/128/IMG_7182.webp - 2025-08-02T01:35:08.945Z
GET /thumbnails/128/IMG_2860.webp - 2025-08-02T01:35:08.945Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_2860.webp'
GET /thumbnails/128/IMG_7175.webp - 2025-08-02T01:35:08.991Z
GET /thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:35:08.992Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:35:09.391Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:35:09.392Z
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:35:09.392Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:35:09.393Z
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:35:09.394Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:35:09.394Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
GET /thumbnails/512/IMG_7252.webp - 2025-08-02T01:35:09.397Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7252.webp'
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:35:09.400Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:35:09.400Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:35:09.407Z
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:35:09.407Z
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:35:09.408Z
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:35:09.408Z
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:35:09.408Z
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:35:09.408Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:35:09.411Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:35:09.411Z
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:35:09.411Z
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:35:09.411Z
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:35:09.411Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
PATCH /canvases/1/state - 2025-08-02T01:35:10.845Z
GET /thumbnails/128/IMG_7261.webp - 2025-08-02T01:35:11.185Z
GET /thumbnails/128/IMG_7260.webp - 2025-08-02T01:35:11.186Z
GET /thumbnails/128/IMG_7256.webp - 2025-08-02T01:35:11.187Z
GET /thumbnails/128/IMG_7259.webp - 2025-08-02T01:35:11.188Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7259.webp'
GET /thumbnails/128/IMG_7252.webp - 2025-08-02T01:35:11.356Z
GET /thumbnails/128/IMG_7253.webp - 2025-08-02T01:35:11.356Z
GET /thumbnails/128/IMG_7246.webp - 2025-08-02T01:35:11.357Z
GET /thumbnails/128/IMG_7251.webp - 2025-08-02T01:35:11.357Z
GET /thumbnails/128/IMG_7207.webp - 2025-08-02T01:35:11.357Z
GET /thumbnails/128/IMG_7202.webp - 2025-08-02T01:35:11.357Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7202.webp'
GET /thumbnails/128/IMG_7200.webp - 2025-08-02T01:35:11.360Z
GET /thumbnails/128/IMG_7199.webp - 2025-08-02T01:35:11.360Z
GET /thumbnails/128/IMG_7193.webp - 2025-08-02T01:35:11.360Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7193.webp'
GET /thumbnails/128/IMG_7192.webp - 2025-08-02T01:35:11.412Z
GET /thumbnails/128/IMG_7183.webp - 2025-08-02T01:35:11.412Z
GET /thumbnails/128/IMG_7189.webp - 2025-08-02T01:35:11.413Z
GET /thumbnails/128/IMG_7181.webp - 2025-08-02T01:35:11.413Z
GET /thumbnails/128/IMG_7182.webp - 2025-08-02T01:35:11.413Z
GET /thumbnails/128/IMG_2860.webp - 2025-08-02T01:35:11.414Z
GET /thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:35:11.418Z
GET /thumbnails/128/IMG_7175.webp - 2025-08-02T01:35:11.419Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7175.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:35:11.429Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:35:11.430Z
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:35:11.430Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:35:11.431Z
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:35:11.431Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:35:11.431Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
GET /thumbnails/512/IMG_7252.webp - 2025-08-02T01:35:11.432Z
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:35:11.433Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:35:11.435Z
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:35:11.435Z
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:35:11.436Z
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:35:11.437Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7252.webp'
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:35:11.437Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:35:11.439Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:35:11.440Z
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:35:11.441Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:35:11.441Z
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:35:11.441Z
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:35:11.441Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:35:11.442Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098512191-y4b4n6axh',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1976.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-2661.512374359188,-1168.157916479367],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-1781.512374359188,-948.157916479367],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1756.512374359188,-1193.157916479367],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-3076.512374359188,-753.157916479367],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-1341.512374359188,-1168.157916479367],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-3076.512374359188,-1193.157916479367],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-2001.512374359188,-1168.157916479367],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-1096.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-2196.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-3076.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-1096.512374359188,-1193.157916479367],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-1316.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-2856.512374359188,-1193.157916479367],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-2196.512374359188,-1193.157916479367],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-2661.512374359188,-948.157916479367],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2881.512374359188,-948.157916479367],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-2416.512374359188,-1193.157916479367],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2416.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-1561.512374359188,-1168.157916479367],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-1536.512374359188,-973.157916479367],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":75}',
  75,
  1754098512193
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
PATCH /canvases/1/state - 2025-08-02T01:35:13.454Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098514546-xyp3t7eyd',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-2269.8154469848864,-948.964480725177],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-2734.8154469848864,-1363.964480725177],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2514.8154469848864,-483.96448072517705],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-2269.8154469848864,-508.96448072517705],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-2709.8154469848864,-728.964480725177],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-2734.8154469848864,-43.964480725177054],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-2709.8154469848864,-508.96448072517705],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-2294.8154469848864,-703.964480725177],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-2489.8154469848864,-68.96448072517705],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-2269.8154469848864,-1168.964480725177],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-2489.8154469848864,-728.964480725177],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-2269.8154469848864,-68.96448072517705],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-2269.8154469848864,-288.96448072517705],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-2709.8154469848864,-1168.964480725177],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-2269.8154469848864,-1388.964480725177],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-2734.8154469848864,-923.964480725177],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2514.8154469848864,-923.964480725177],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-2489.8154469848864,-1388.964480725177],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2489.8154469848864,-1168.964480725177],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2514.8154469848864,-263.96448072517705],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2709.8154469848864,-288.96448072517705],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":76}',
  76,
  1754098514548
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
GET /thumbnails/128/IMG_7261.webp - 2025-08-02T01:35:15.268Z
GET /thumbnails/128/IMG_7260.webp - 2025-08-02T01:35:15.269Z
GET /thumbnails/128/IMG_7256.webp - 2025-08-02T01:35:15.269Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7256.webp'
GET /thumbnails/128/IMG_7259.webp - 2025-08-02T01:35:15.324Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7259.webp'
GET /thumbnails/128/IMG_7252.webp - 2025-08-02T01:35:15.415Z
GET /thumbnails/128/IMG_7253.webp - 2025-08-02T01:35:15.415Z
GET /thumbnails/128/IMG_7246.webp - 2025-08-02T01:35:15.416Z
GET /thumbnails/128/IMG_7251.webp - 2025-08-02T01:35:15.416Z
GET /thumbnails/128/IMG_7207.webp - 2025-08-02T01:35:15.416Z
GET /thumbnails/128/IMG_7202.webp - 2025-08-02T01:35:15.417Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7202.webp'
GET /thumbnails/128/IMG_7200.webp - 2025-08-02T01:35:15.420Z
GET /thumbnails/128/IMG_7199.webp - 2025-08-02T01:35:15.420Z
GET /thumbnails/128/IMG_7193.webp - 2025-08-02T01:35:15.420Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7193.webp'
GET /thumbnails/128/IMG_7192.webp - 2025-08-02T01:35:15.423Z
GET /thumbnails/128/IMG_7183.webp - 2025-08-02T01:35:15.423Z
GET /thumbnails/128/IMG_7189.webp - 2025-08-02T01:35:15.424Z
GET /thumbnails/128/IMG_7181.webp - 2025-08-02T01:35:15.424Z
GET /thumbnails/128/IMG_7182.webp - 2025-08-02T01:35:15.424Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7182.webp'
GET /thumbnails/128/IMG_2860.webp - 2025-08-02T01:35:15.432Z
GET /thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:35:15.432Z
GET /thumbnails/128/IMG_7175.webp - 2025-08-02T01:35:15.432Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/128/IMG_7175.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:35:15.448Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:35:15.448Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:35:15.450Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:35:15.451Z
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:35:15.451Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:35:15.451Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
GET /thumbnails/512/IMG_7252.webp - 2025-08-02T01:35:15.464Z
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:35:15.465Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:35:15.465Z
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:35:15.465Z
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:35:15.466Z
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:35:15.466Z
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:35:15.469Z
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:35:15.470Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7252.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:35:15.471Z
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:35:15.471Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:35:15.471Z
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:35:15.472Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:35:15.474Z
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:35:15.474Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098516563-h00whzzlu',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1947.32243022511,-1335.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-2852.32243022511,-1310.4169946916575],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2412.32243022511,-870.4169946916575],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-2167.32243022511,-895.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-2607.32243022511,-895.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-2852.32243022511,-430.41699469165746],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-2827.32243022511,-675.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-2192.32243022511,-1090.4169946916575],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-1947.32243022511,-675.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-2167.32243022511,-1335.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-1947.32243022511,-1115.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-2167.32243022511,-675.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-1947.32243022511,-895.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-2827.32243022511,-1115.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-2387.32243022511,-1335.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-2852.32243022511,-870.4169946916575],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2412.32243022511,-1090.4169946916575],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-2607.32243022511,-1335.4169946916575],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2607.32243022511,-1115.4169946916575],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2412.32243022511,-650.4169946916575],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2607.32243022511,-675.4169946916575],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":77}',
  77,
  1754098516565
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098517746-rbs05qnzb',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1034.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-4274.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2594.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1544.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-3274.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4054.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-3614.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1764.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-864.8224302251101,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-1374.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-694.8224302251101,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-1204.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-524.8224302251101,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-3444.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-1934.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-3834.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2374.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-3104.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2934.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2154.82243022511,-970.8931851678482],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2764.82243022511,-970.8931851678482],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":78}',
  78,
  1754098517747
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098518329-uoprzszu7',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-3764.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-574.8224302251101,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2254.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-3254.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-1524.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-794.8224302251101,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-1184.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-3084.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-3934.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-3424.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-4104.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-3594.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-4274.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-1354.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-2864.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-1014.8224302251101,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2474.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-1694.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-1864.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2694.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2034.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":79}',
  79,
  1754098518330
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098519088-hgnwq8wtw',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-1034.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-4274.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2594.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-1544.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-3274.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4054.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-3614.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-1764.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-864.8224302251101,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-1374.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-694.8224302251101,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-1204.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-524.8224302251101,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-3444.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-1934.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-3834.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2374.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-3104.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2934.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2154.82243022511,-970.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2764.82243022511,-970.8931851678485],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":80}',
  80,
  1754098519089
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098519904-66k7z624k',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-2351.0129064155867,394.1068148321515],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-2351.0129064155867,-2995.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2351.0129064155867,-1165.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-2351.0129064155867,-265.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-2351.0129064155867,-2045.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-2351.0129064155867,-2825.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-2351.0129064155867,-2485.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-2351.0129064155867,-435.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-2351.0129064155867,614.1068148321515],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-2351.0129064155867,-45.893185167848515],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-2351.0129064155867,834.1068148321515],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-2351.0129064155867,174.10681483215149],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-2351.0129064155867,1054.1068148321515],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-2351.0129064155867,-2265.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-2351.0129064155867,-655.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-2351.0129064155867,-2655.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2351.0129064155867,-995.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-2351.0129064155867,-1825.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2351.0129064155867,-1605.8931851678485],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2351.0129064155867,-825.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2351.0129064155867,-1385.8931851678485],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":81}',
  81,
  1754098519905
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098521204-j4p45gcy7',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-2351.0129064155863,-2335.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-2351.0129064155863,1104.1068148321515],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-2351.0129064155863,-725.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-2351.0129064155863,-1675.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-2351.0129064155863,104.10681483215149],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-2351.0129064155863,934.1068148321515],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-2351.0129064155863,544.1068148321515],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-2351.0129064155863,-1455.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-2351.0129064155863,-2555.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-2351.0129064155863,-1895.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-2351.0129064155863,-2775.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-2351.0129064155863,-2115.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-2351.0129064155863,-2995.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-2351.0129064155863,324.1068148321515],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-2351.0129064155863,-1285.8931851678485],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-2351.0129064155863,764.1068148321515],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2351.0129064155863,-895.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-2351.0129064155863,-115.89318516784851],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-2351.0129064155863,-335.8931851678485],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2351.0129064155863,-1065.8931851678485],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-2351.0129064155863,-555.8931851678485],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":82}',
  82,
  1754098521205
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
PATCH /canvases/1/state - 2025-08-02T01:35:22.532Z
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098523578-mikbh4b1b',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-4292.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-2777.100422503102,-1821.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-4757.100422503102,-1821.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-4072.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-3852.100422503102,-1846.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-2997.100422503102,-1821.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-3412.100422503102,-1846.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-3657.100422503102,-2041.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-3852.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-4512.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-3412.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-4732.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-2972.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-3632.100422503102,-1846.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-3192.100422503102,-2066.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-3217.100422503102,-1821.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-2557.100422503102,-2041.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-4072.100422503102,-1846.9742662489293],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-4292.100422503102,-1846.9742662489293],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-2777.100422503102,-2041.9742662489293],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4512.100422503102,-1846.9742662489293],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":83}',
  83,
  1754098523579
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098532962-rx6kiy0ua',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5370.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5175.852031254711,-2001.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-4955.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5150.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5150.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4735.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5590.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4955.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5590.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-4930.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5590.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5590.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5370.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-4710.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5150.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-4735.852031254711,-2221.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-4735.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5590.852031254711,-1586.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5370.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5395.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4930.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":84}',
  84,
  1754098532965
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
PATCH /canvases/1/state - 2025-08-02T01:35:33.524Z
GET /canvases - 2025-08-02T01:35:34.098Z
GET /database/size - 2025-08-02T01:35:34.098Z
Fetched 2 canvases from database
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098540213-3t6lnhzfj',
  type: 'node_move',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions', 'nodes' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5370.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5175.852031254711,-2001.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-4955.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5150.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5150.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4735.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5590.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4955.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5590.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-4930.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5792.3964327991125,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5590.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5370.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-4710.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5150.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-4735.852031254711,-2221.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-4735.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5590.852031254711,-1586.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5370.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5395.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4930.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":85}',
  85,
  1754098540214
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098543522-jzzkt9ak2',
  type: 'node_move',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions', 'nodes' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5370.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5175.852031254711,-2001.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-4955.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5150.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5150.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4735.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5590.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4955.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5590.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-4930.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5599.19179959448,-2024.876454151117],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5590.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5370.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-4710.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5150.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-4735.852031254711,-2221.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-4735.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5590.852031254711,-1586.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5370.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5395.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4930.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":86}',
  86,
  1754098543523
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098554604-fiuxrar4f',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5370.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5175.852031254711,-2001.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-4955.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5150.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5150.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4735.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5590.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4955.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5590.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-4930.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5599.19179959448,-2024.876454151117],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5590.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5370.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-4710.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5150.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-4735.852031254711,-2221.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-4735.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5590.852031254711,-1586.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5370.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5395.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-45,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4930.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-45,"flags":{},"title":""}],"version":87}',
  87,
  1754098554606
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098558795-uq63fpgun',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5370.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5175.852031254711,-2001.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-4955.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5150.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5150.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4735.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5590.852031254711,-1806.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4955.852031254711,-2441.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5590.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-4930.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5599.19179959448,-2024.876454151117],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5590.852031254711,-2466.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5370.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-4710.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5150.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-4735.852031254711,-2221.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-4735.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5590.852031254711,-1586.2664155410785],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5370.852031254711,-2246.2664155410785],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5395.852031254711,-1781.2664155410785],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4930.852031254711,-2026.2664155410785],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-90,"flags":{},"title":""}],"version":88}',
  88,
  1754098558797
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098560879-bk04v2b70',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-90,"flags":{},"title":""}],"version":89}',
  89,
  1754098560880
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098563778-yd3ju90py',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-90,"flags":{},"title":""}],"version":90}',
  90,
  1754098563780
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098563826-3f1xbzqqt',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-90,"flags":{},"title":""}],"version":91}',
  91,
  1754098563828
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098563929-a7ktwo7mz',
  type: 'node_reset',
  hasUndoData: true,
  undoDataKeys: [ 'nodes' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":92}',
  92,
  1754098563931
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098565611-b37pjklvx',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-90,"flags":{},"title":""}],"version":93}',
  93,
  1754098565612
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098565666-1kyrbgy5b',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":-90,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":-90,"flags":{},"title":""}],"version":94}',
  94,
  1754098565667
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098565767-o8dk2gzex',
  type: 'node_reset',
  hasUndoData: true,
  undoDataKeys: [ 'nodes' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5484.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5069.877127779807,-2354.818539093202],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5289.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5044.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5044.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5289.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5924.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5069.877127779807,-1694.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5704.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5484.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5924.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5924.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5264.877127779807,-2379.818539093202],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5704.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5924.877127779807,-1719.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5949.877127779807,-1474.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5509.877127779807,-1914.8185390932022],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5704.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5704.877127779807,-2159.818539093202],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5509.877127779807,-2134.818539093202],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5264.877127779807,-1939.8185390932022],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":95}',
  95,
  1754098565768
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098567711-3amidqva0',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5439.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5024.780602683281,-2413.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5244.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-4779.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-4559.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4584.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-4559.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4804.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-4559.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5219.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5439.780602683281,-1558.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-4779.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5219.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5439.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5219.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5024.780602683281,-1753.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5464.780602683281,-1973.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-4779.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-4999.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5464.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4999.780602683281,-2218.1969174715805],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":96}',
  96,
  1754098567712
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸŽ¯ Execute operation request: {
  operationId: '1754098507032-5155myupw-1754098570129-t8sjhba34',
  type: 'node_rotate',
  hasUndoData: true,
  undoDataKeys: [ 'previousRotations', 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'zglVbPQmeaO76xjUAAAT'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5439.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5024.780602683281,-2413.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5244.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-4779.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-4559.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-4584.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-4559.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-4804.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-4559.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5219.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5439.780602683281,-1558.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-4779.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5219.780602683281,-2438.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5439.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5219.780602683281,-1778.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5024.780602683281,-1753.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5464.780602683281,-1973.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-4779.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-4999.780602683281,-1998.1969174715805],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5464.780602683281,-2193.1969174715805],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-4999.780602683281,-2218.1969174715805],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":97}',
  97,
  1754098570130
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
ðŸ”Œ Disconnecting user-1753750894990-6oseyvb79 (1754098507032-5155myupw)
GET /canvases - 2025-08-02T01:36:17.669Z
Fetched 2 canvases from database
GET /canvases/1/state - 2025-08-02T01:36:18.056Z
ðŸ“¥ Join request from user-1753750894990-6oseyvb79 (tab: 1754098577157-dygmgeeyk) for canvas 1
ðŸ‘¤ Found existing user: user-1753750894990-6oseyvb79 (ID: 3)
âœ… user-1753750894990-6oseyvb79 (1754098577157-dygmgeeyk) joined canvas Demo Canvas
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:36:18.179Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:36:18.181Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:36:18.183Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:36:18.187Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:36:18.188Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:36:18.188Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:36:18.190Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:36:18.191Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:36:18.192Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:36:18.193Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:36:18.194Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:36:18.195Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:36:18.196Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:36:18.196Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:36:18.196Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:36:18.197Z
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:36:18.197Z
GET /thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:36:18.198Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:36:19.079Z
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:36:19.079Z
GET /thumbnails/256/IMG_7253.webp - 2025-08-02T01:36:19.080Z
GET /thumbnails/256/IMG_7246.webp - 2025-08-02T01:36:19.081Z
GET /thumbnails/256/IMG_7207.webp - 2025-08-02T01:36:19.081Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7207.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:36:19.788Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:36:19.789Z
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:36:19.789Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:36:19.789Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:36:19.790Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:36:19.793Z
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:36:19.794Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:36:19.795Z
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:36:19.795Z
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:36:19.796Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:36:19.797Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:36:19.802Z
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:36:19.802Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:36:19.803Z
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:36:19.803Z
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:36:19.804Z
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:36:19.804Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
GET /thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:36:19.804Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:36:20.118Z
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:36:20.120Z
GET /thumbnails/256/IMG_7253.webp - 2025-08-02T01:36:20.120Z
GET /thumbnails/256/IMG_7246.webp - 2025-08-02T01:36:20.121Z
GET /thumbnails/256/IMG_7207.webp - 2025-08-02T01:36:20.121Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7207.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:36:21.816Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:36:21.817Z
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:36:21.817Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:36:21.818Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:36:21.818Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:36:21.821Z
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:36:21.825Z
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:36:21.825Z
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:36:21.826Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:36:21.827Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:36:21.828Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:36:21.841Z
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:36:21.842Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:36:21.843Z
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:36:21.843Z
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:36:21.844Z
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:36:21.845Z
GET /thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:36:21.848Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:36:22.343Z
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:36:22.344Z
GET /thumbnails/256/IMG_7253.webp - 2025-08-02T01:36:22.344Z
GET /thumbnails/256/IMG_7246.webp - 2025-08-02T01:36:22.344Z
GET /thumbnails/256/IMG_7207.webp - 2025-08-02T01:36:22.345Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7207.webp'
GET /thumbnails/512/IMG_7261.webp - 2025-08-02T01:36:25.868Z
GET /thumbnails/512/IMG_7260.webp - 2025-08-02T01:36:25.869Z
GET /thumbnails/512/IMG_7256.webp - 2025-08-02T01:36:25.870Z
GET /thumbnails/512/IMG_7259.webp - 2025-08-02T01:36:25.870Z
GET /thumbnails/512/IMG_7253.webp - 2025-08-02T01:36:25.871Z
GET /thumbnails/512/IMG_7251.webp - 2025-08-02T01:36:25.871Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7261.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7260.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7256.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7259.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7253.webp'
GET /thumbnails/512/IMG_7199.webp - 2025-08-02T01:36:25.875Z
GET /thumbnails/512/IMG_7202.webp - 2025-08-02T01:36:25.875Z
GET /thumbnails/512/IMG_7200.webp - 2025-08-02T01:36:25.875Z
GET /thumbnails/512/IMG_7193.webp - 2025-08-02T01:36:25.876Z
GET /thumbnails/512/IMG_7192.webp - 2025-08-02T01:36:25.876Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7251.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7199.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7202.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7200.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7193.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7192.webp'
GET /thumbnails/512/IMG_7183.webp - 2025-08-02T01:36:25.883Z
GET /thumbnails/512/IMG_7189.webp - 2025-08-02T01:36:25.884Z
GET /thumbnails/512/IMG_7181.webp - 2025-08-02T01:36:25.885Z
GET /thumbnails/512/IMG_7182.webp - 2025-08-02T01:36:25.885Z
GET /thumbnails/512/IMG_2860.webp - 2025-08-02T01:36:25.885Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7183.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7189.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7181.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7182.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_2860.webp'
GET /thumbnails/512/IMG_7175.webp - 2025-08-02T01:36:25.888Z
GET /thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp - 2025-08-02T01:36:25.888Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7175.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.webp'
GET /thumbnails/512/IMG_7246.webp - 2025-08-02T01:36:26.354Z
GET /thumbnails/512/IMG_7207.webp - 2025-08-02T01:36:26.354Z
GET /thumbnails/256/IMG_7253.webp - 2025-08-02T01:36:26.355Z
GET /thumbnails/256/IMG_7246.webp - 2025-08-02T01:36:26.355Z
GET /thumbnails/256/IMG_7207.webp - 2025-08-02T01:36:26.355Z
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/512/IMG_7207.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7253.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7246.webp'
Error: ENOENT: no such file or directory, stat '/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/thumbnails/256/IMG_7207.webp'
ðŸ¤– Starting automated cleanup...
ðŸ§¹ Starting database cleanup...
ðŸ“‹ Cleanup parameters: dryRun=false, deleteAllThumbnails=false
âœ… Deleted 0 operations (was 0)
âœ… Deleted 0 active sessions
âœ… Deleted 0 active transactions
âœ… Deleted 0 old canvas versions
ðŸ“ Found 132 files in database
ðŸ“‹ Found 2 canvases to check
Failed to check recent operations: Error: SQLITE_ERROR: no such column: operation_data
--> in Database#all('\n' +
  '                            SELECT operation_data FROM operations \n' +
  '                            WHERE timestamp > ? \n' +
  "                            AND (operation_data LIKE '%serverUrl%' OR operation_data LIKE '%uploadImage%')\n" +
  '                            ORDER BY timestamp DESC\n' +
  '                            LIMIT 100\n' +
  '                        ', [ 1754097880650 ], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:238:21
    at new Promise (<anonymous>)
    at Database.all (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:237:16)
    at Layer.handle (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/index.js:1588:57)
    at async ImageCanvasServer.performAutomatedCleanup (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/index.js:2613:13) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
âœ… Found 0 referenced files (0 from recent operations)
ðŸ—‘ï¸ Found 132 orphaned files in database to delete
  âœ… Deleted: 1754097880798-3wowln.jpeg
  âœ… Deleted: 1754097880831-5oahwd.jpeg
  âœ… Deleted: 1754097880830-6tqbua.jpeg
  âœ… Deleted: 1754097880838-n8a4z8.jpeg
  âœ… Deleted: 1754097880871-cjaqnr.jpeg
  âœ… Deleted: 1754097880868-zm04s.jpeg
  âœ… Deleted: 1754097882248-zw6su9.jpeg
  âœ… Deleted: 1754097882933-38izow.jpeg
  âœ… Deleted: 1754097882855-hacz7v.jpeg
  âœ… Deleted: 1754097882012-h8spz.jpeg
  âœ… Deleted: 1754097883370-0kud26.jpeg
  âœ… Deleted: 1754097883372-54q4hd.jpeg
  âœ… Deleted: 1754097883958-zybf26.jpeg
  âœ… Deleted: 1754097884440-gb4pd.jpeg
  âœ… Deleted: 1754097884786-tj6tel.jpeg
  âœ… Deleted: 1754097885166-1chzz.jpeg
  âœ… Deleted: 1754097885043-ytv5an.jpeg
  âœ… Deleted: 1754097885748-vbwmer.jpeg
  âœ… Deleted: 1754097885884-dvsphj.jpeg
  âœ… Deleted: 1754097886292-9y0zji.jpeg
  âœ… Deleted: 1754097886628-30ssyo.jpeg
  âœ… Deleted: 1754097886624-wmlfy5.jpeg
  âœ… Deleted: 1754097887122-0fjaj.jpeg
  âœ… Deleted: 1754097887587-ycxoye.jpeg
  âœ… Deleted: 1754097888132-b6qdo9.jpeg
  âœ… Deleted: 1754097887601-jtiax.jpeg
  âœ… Deleted: 1754097888484-qji9t.jpeg
  âœ… Deleted: 1754097888969-qdt3f5.jpeg
  âœ… Deleted: 1754097889039-xpgijr.jpeg
  âœ… Deleted: 1754097889746-2vgwpt.jpeg
  âœ… Deleted: 1754097889745-dmjseg.jpeg
  âœ… Deleted: 1754097889749-1r9mse.jpeg
  âœ… Deleted: 1754097890399-vcw0xh.jpeg
  âœ… Deleted: 1754097891207-mvrygi.jpeg
  âœ… Deleted: 1754097891129-1vumno.jpeg
  âœ… Deleted: 1754097890750-j6dh5u.jpeg
  âœ… Deleted: 1754097892469-dtjo6f.jpeg
  âœ… Deleted: 1754097891967-aephyl.jpeg
  âœ… Deleted: 1754097892819-owa2ea.jpeg
  âœ… Deleted: 1754097892876-i3f5ro.jpeg
  âœ… Deleted: 1754097892873-6cxdzg.jpeg
  âœ… Deleted: 1754097893242-xnc8k4.jpeg
  âœ… Deleted: 1754097894004-vs84a.jpeg
  âœ… Deleted: 1754097894006-nfd26s.jpeg
  âœ… Deleted: 1754097894435-iltbti.jpeg
  âœ… Deleted: 1754097894837-fa7fxb.jpeg
  âœ… Deleted: 1754097895375-ftvwv8.jpeg
  âœ… Deleted: 1754097895000-jpxjv4.jpeg
  âœ… Deleted: 1754097895844-omz2oc.jpeg
  âœ… Deleted: 1754097896327-hvhfr9.jpeg
  âœ… Deleted: 1754097896407-v22cb6.jpeg
  âœ… Deleted: 1754097897045-bj8bmc.jpeg
  âœ… Deleted: 1754097897172-4pg09.jpeg
  âœ… Deleted: 1754097897483-gsudi.jpeg
  âœ… Deleted: 1754097897187-ya6iqq.jpeg
  âœ… Deleted: 1754097898009-zvyz1h.jpeg
  âœ… Deleted: 1754097898346-f4qqd.jpeg
  âœ… Deleted: 1754097898353-cg68eo.jpeg
  âœ… Deleted: 1754097898916-fm7jnu.jpeg
  âœ… Deleted: 1754097899347-7gqfc.jpeg
  âœ… Deleted: 1754097899685-af32t.jpeg
  âœ… Deleted: 1754097900022-1xjag9.jpeg
  âœ… Deleted: 1754097900100-duct3w.jpeg
  âœ… Deleted: 1754097901079-a9chg.jpeg
  âœ… Deleted: 1754097900868-22janl.jpeg
  âœ… Deleted: 1754097901078-k8c1xo.jpeg
  âœ… Deleted: 1754097901899-ugvr2.jpeg
  âœ… Deleted: 1754097901899-g4koqm.jpeg
  âœ… Deleted: 1754097901902-zlq36g.jpeg
  âœ… Deleted: 1754097902581-e9pqr.jpeg
  âœ… Deleted: 1754097902347-dv15s4.jpeg
  âœ… Deleted: 1754097902650-0j1src.jpeg
  âœ… Deleted: 1754097903741-ciz5f.jpeg
  âœ… Deleted: 1754097903322-sugqze.jpeg
  âœ… Deleted: 1754097903740-6sxsbv.jpeg
  âœ… Deleted: 1754097904804-tb0f9q.jpeg
  âœ… Deleted: 1754097904487-jo1a8f.jpeg
  âœ… Deleted: 1754097905126-5o0rhb.jpeg
  âœ… Deleted: 1754097905300-2s20h3.jpeg
  âœ… Deleted: 1754097905298-p2ste8.jpeg
  âœ… Deleted: 1754097906017-bzzn3r.jpeg
  âœ… Deleted: 1754097906462-zi21isn.jpeg
  âœ… Deleted: 1754097906122-z6ncwy.jpeg
  âœ… Deleted: 1754097906995-efr7.jpeg
  âœ… Deleted: 1754097907068-q8ye3m.jpeg
  âœ… Deleted: 1754097907652-wggko.jpeg
  âœ… Deleted: 1754097907739-q88wcd.jpeg
  âœ… Deleted: 1754097908149-20h9ar.jpeg
  âœ… Deleted: 1754097908644-67thbf.jpeg
  âœ… Deleted: 1754097909141-rcfbzn.jpeg
  âœ… Deleted: 1754097909202-8le619.jpeg
  âœ… Deleted: 1754097909676-rbtkb.jpeg
  âœ… Deleted: 1754097909748-t1xrwd.jpeg
  âœ… Deleted: 1754097910330-sfad2.jpeg
  âœ… Deleted: 1754097910328-368zyn.jpeg
  âœ… Deleted: 1754097910782-ofjxsm.jpeg
  âœ… Deleted: 1754097911308-njunn4.jpeg
  âœ… Deleted: 1754097912007-ghtrkl.jpeg
  âœ… Deleted: 1754097912450-ehvckg.jpeg
  âœ… Deleted: 1754097912594-fmrnyn.jpeg
  âœ… Deleted: 1754097913118-ojyub.jpeg
  âœ… Deleted: 1754097913474-isvaii.jpeg
  âœ… Deleted: 1754097913803-5x4uli.jpeg
  âœ… Deleted: 1754097914088-5t9xzc.jpeg
  âœ… Deleted: 1754097914430-5lgex.jpeg
  âœ… Deleted: 1754097914784-9vshi.jpeg
  âœ… Deleted: 1754098359145-esfqf8.jpeg
  âœ… Deleted: 1754098359145-gz7xg.jpeg
  âœ… Deleted: 1754098359145-pelusn.jpeg
  âœ… Deleted: 1754098359147-ebektq.jpeg
  âœ… Deleted: 1754098360535-mkoi09.jpeg
  âœ… Deleted: 1754098360534-0y6fpb.jpeg
  âœ… Deleted: 1754098361227-8pjlpi.jpeg
  âœ… Deleted: 1754098360651-sdi2j4.jpeg
  âœ… Deleted: 1754098360786-ibxa.jpeg
  âœ… Deleted: 1754098361879-bx3qg.jpeg
  âœ… Deleted: 1754098361880-gnxxbd.jpeg
  âœ… Deleted: 1754098362733-ezq2t5.jpeg
  âœ… Deleted: 1754098363042-x72sdt.jpeg
  âœ… Deleted: 1754098365224-x02pk.jpeg
  âœ… Deleted: 1754098365143-mrm72.jpeg
  âœ… Deleted: 1754098365251-2pix48.jpeg
  âœ… Deleted: 1754098365223-g1sg9d.jpeg
  âœ… Deleted: 1754098367130-0phf9u.jpeg
  âœ… Deleted: 1754098368632-dhg8pb.jpeg
  âœ… Deleted: 1754098368637-0ijr9d.jpeg
  âœ… Deleted: 1754098369408-ed2ebr.jpeg
  âœ… Deleted: 1754098369719-ttvu6f.jpeg
  âœ… Deleted: 1754098369805-ahqlpn.jpeg
  âœ… Deleted: 1754098370708-2kulkf.jpeg
  âœ… Deleted: 1754098371262-nqnk5.jpeg
  âœ… Deleted: 1754098371262-nvlhwp.jpeg
ðŸ’¾ Scanning 2 files on disk...
  âœ… Deleted orphaned disk file: 1754094147379-yycna.jpeg
  âœ… Deleted orphaned disk file: 1754097878316-49n7w.jpeg
ðŸ—‘ï¸ Deleted 2 orphaned files from disk
ðŸ”§ Running VACUUM to reclaim database space...
âœ… VACUUM completed. Saved 0.00 MB (180224 â†’ 180224 bytes)
âœ… Cleanup completed: {
  success: true,
  fileCleanup: {
    referencedFiles: 0,
    orphanedFiles: 132,
    orphanedDiskFiles: 2,
    deletedFiles: 134
  },
  operationsDeleted: 0,
  thumbnailsDeleted: 6,
  transcodesDeleted: 0,
  databaseSizeBefore: 180224,
  databaseSizeAfter: 180224,
  spaceSaved: 0,
  message: 'Cleanup completed. Deleted 134 files (132 from DB, 2 from disk), 0 operations, 6 thumbnails, 0 transcodes.'
}
âœ… Automated cleanup completed: Cleanup completed. Deleted 134 files (132 from DB, 2 from disk), 0 operations, 6 thumbnails, 0 transcodes.
  - Referenced files: 0
  - Deleted files: 134
ðŸŽ¯ Execute operation request: {
  operationId: '1754098577157-dygmgeeyk-1754099802885-6cnao11j2',
  type: 'node_align',
  hasUndoData: true,
  undoDataKeys: [ 'previousPositions' ],
  userId: 3,
  canvasId: 2,
  socketId: 'DgtANMhHypFujU_PAAAV'
}
Error executing operation: Error: SQLITE_ERROR: table canvases has no column named canvas_id
--> in Database#run('INSERT OR REPLACE INTO canvases (canvas_id, data, version, updated_at)\n' +
  '             VALUES (?, ?, ?, ?)', [
  2,
  '{"nodes":[{"id":1,"type":"media/image","pos":[-5632.599135501815,-2285.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7261.jpeg","fileSize":3375844,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e0949976bbb896a2ac3e918567bf67ff68bb74a112e33fcf0b18f88742c8814a","tempId":null,"serverUrl":"/uploads/1754098359145-esfqf8.jpeg","serverFilename":"IMG_7261.jpeg"},"rotation":0,"flags":{},"title":""},{"id":2,"type":"media/image","pos":[-5877.599135501815,-1380.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7260.jpeg","fileSize":4214190,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"f796ec2ca095297906028d7c5d2bf8d28866e66129bde49ea82d6fc03416af76","tempId":null,"serverUrl":"/uploads/1754098359145-pelusn.jpeg","serverFilename":"IMG_7260.jpeg"},"rotation":0,"flags":{},"title":""},{"id":4,"type":"media/image","pos":[-5437.599135501815,-2260.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7256.jpeg","fileSize":3652533,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"d586e329359eb979fb9a9c439dbcf3098a3a664f400a2fe253691d701c32b121","tempId":null,"serverUrl":"/uploads/1754098359145-gz7xg.jpeg","serverFilename":"IMG_7256.jpeg"},"rotation":0,"flags":{},"title":""},{"id":3,"type":"media/image","pos":[-5192.599135501815,-1405.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7259.jpeg","fileSize":6428005,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"55ae28f6157467f29859c7b69e8eefd5fd9b7cef0c6c6e6df1a4cf7916aa91ff","tempId":null,"serverUrl":"/uploads/1754098359147-ebektq.jpeg","serverFilename":"IMG_7259.jpeg"},"rotation":0,"flags":{},"title":""},{"id":6,"type":"media/image","pos":[-5852.599135501815,-1185.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7252.jpeg","fileSize":3520431,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"1fbac5dea01becab9cecebe03a6b9f61e0453477af1a19cda33c7179fec8fb99","tempId":null,"serverUrl":"/uploads/1754098361880-gnxxbd.jpeg","serverFilename":"IMG_7252.jpeg"},"rotation":0,"flags":{},"title":""},{"id":5,"type":"media/image","pos":[-5437.599135501815,-1380.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7253.jpeg","fileSize":5004690,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"553981f62838dbf11542e1dfc0c04f5f715e29d093a1efe761b3868768b0a7e8","tempId":null,"serverUrl":"/uploads/1754098360534-0y6fpb.jpeg","serverFilename":"IMG_7253.jpeg"},"rotation":0,"flags":{},"title":""},{"id":8,"type":"media/image","pos":[-5632.599135501815,-1405.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7246.jpeg","fileSize":2120894,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"c18c7e6fde8e12d4acde6847024f0c343d8c34619d407ca7dc7f58e03d9236d1","tempId":null,"serverUrl":"/uploads/1754098361227-8pjlpi.jpeg","serverFilename":"IMG_7246.jpeg"},"rotation":0,"flags":{},"title":""},{"id":7,"type":"media/image","pos":[-5217.599135501815,-1600.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7251.jpeg","fileSize":2615159,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"724b09dc3795b5582435b2ca9dc7e3824252d594ae4cbb9393dc4dead954165e","tempId":null,"serverUrl":"/uploads/1754098361879-bx3qg.jpeg","serverFilename":"IMG_7251.jpeg"},"rotation":0,"flags":{},"title":""},{"id":9,"type":"media/image","pos":[-5412.599135501815,-1625.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7207.jpeg","fileSize":4801365,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"44a998c9065f0c0bb90de54476ab028bf04c2125adffbfe27333621cd6f84be1","tempId":null,"serverUrl":"/uploads/1754098362733-ezq2t5.jpeg","serverFilename":"IMG_7207.jpeg"},"rotation":0,"flags":{},"title":""},{"id":10,"type":"media/image","pos":[-5412.599135501815,-2065.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7202.jpeg","fileSize":6896004,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"65aa3175ef744c882b5d46bda3d144778f931f4f4ff1441827549b4cb052e5de","tempId":null,"serverUrl":"/uploads/1754098363042-x72sdt.jpeg","serverFilename":"IMG_7202.jpeg"},"rotation":0,"flags":{},"title":""},{"id":11,"type":"media/image","pos":[-5852.599135501815,-1845.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7200.jpeg","fileSize":6343962,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"5234b3014d26ea518f1617f53b0e2d4a147bfae920defdcadf4fbedbae3f3302","tempId":null,"serverUrl":"/uploads/1754098360651-sdi2j4.jpeg","serverFilename":"IMG_7200.jpeg"},"rotation":0,"flags":{},"title":""},{"id":12,"type":"media/image","pos":[-5192.599135501815,-1845.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7199.jpeg","fileSize":6978440,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"e505849cad7e909ed56ee20a9526fcca57f62c3c2233ee87805c2d9f94ab214b","tempId":null,"serverUrl":"/uploads/1754098360786-ibxa.jpeg","serverFilename":"IMG_7199.jpeg"},"rotation":0,"flags":{},"title":""},{"id":13,"type":"media/image","pos":[-5192.599135501815,-2285.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7193.jpeg","fileSize":3613521,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"4d25ad97ba58af7d5f2781f7b93c82b642ba93109e205d9ba8b9d0f7af2df0de","tempId":null,"serverUrl":"/uploads/1754098365224-x02pk.jpeg","serverFilename":"IMG_7193.jpeg"},"rotation":0,"flags":{},"title":""},{"id":14,"type":"media/image","pos":[-5632.599135501815,-2065.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7192.jpeg","fileSize":5585040,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"24a1384543b4b3bf5cff6406f29e992a3d55371e357e5ff1db60cf0aff8ac0f1","tempId":null,"serverUrl":"/uploads/1754098365223-g1sg9d.jpeg","serverFilename":"IMG_7192.jpeg"},"rotation":0,"flags":{},"title":""},{"id":16,"type":"media/image","pos":[-5632.599135501815,-1845.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7183.jpeg","fileSize":1817641,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"d9b84152b7b9e7043e1fffb285bf762a8b5c9503d49d335e1a541ee9e42e4572","tempId":null,"serverUrl":"/uploads/1754098365251-2pix48.jpeg","serverFilename":"IMG_7183.jpeg"},"rotation":0,"flags":{},"title":""},{"id":15,"type":"media/image","pos":[-5437.599135501815,-1820.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7189.jpeg","fileSize":5194748,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"b22ef93964fc10fa02025baf31687d5a6e2eeaccad4452a6db36eff2abb201b1","tempId":null,"serverUrl":"/uploads/1754098365143-mrm72.jpeg","serverFilename":"IMG_7189.jpeg"},"rotation":0,"flags":{},"title":""},{"id":18,"type":"media/image","pos":[-5877.599135501815,-2040.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7181.jpeg","fileSize":2199729,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"7853edf4d22cf51e499b7aed5d89b95d399e30b719f465000490245418efc671","tempId":null,"serverUrl":"/uploads/1754098368632-dhg8pb.jpeg","serverFilename":"IMG_7181.jpeg"},"rotation":0,"flags":{},"title":""},{"id":17,"type":"media/image","pos":[-5632.599135501815,-1625.3011645758274],"size":[150,200],"properties":{"filename":"IMG_7182.jpeg","fileSize":3698283,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"328cb84fc7bb3241f5c50b1e8d8c1788bdde171387ed87cd7a3f19057f62af54","tempId":null,"serverUrl":"/uploads/1754098367130-0phf9u.jpeg","serverFilename":"IMG_7182.jpeg"},"rotation":0,"flags":{},"title":""},{"id":20,"type":"media/image","pos":[-5192.599135501815,-2065.3011645758274],"size":[150,200],"properties":{"filename":"IMG_2860.jpeg","fileSize":3438797,"originalWidth":2250,"originalHeight":3000,"isPreview":true,"hash":"38373b6704be9651e57eb0a38e97f7290310b06100a42ceb475141850d910070","tempId":null,"serverUrl":"/uploads/1754098369408-ed2ebr.jpeg","serverFilename":"IMG_2860.jpeg"},"rotation":0,"flags":{},"title":""},{"id":19,"type":"media/image","pos":[-5877.599135501815,-2260.3011645758274],"size":[200,150],"properties":{"filename":"IMG_7175.jpeg","fileSize":5240504,"originalWidth":4032,"originalHeight":3024,"isPreview":true,"hash":"9d4c80a8aebb3f15221f29e67e7a10b96b7004ff0a3a9a7ec3e9dd73a00e63b9","tempId":null,"serverUrl":"/uploads/1754098368637-0ijr9d.jpeg","serverFilename":"IMG_7175.jpeg"},"rotation":0,"flags":{},"title":""},{"id":21,"type":"media/image","pos":[-5852.599135501815,-1625.3011645758274],"size":[150,200],"properties":{"filename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg","fileSize":1799092,"originalWidth":3024,"originalHeight":4032,"isPreview":true,"hash":"90d6e224a9b45b937c2e17793a2f3a44ccd63b3c66f5132955e8706c0e75a726","tempId":null,"serverUrl":"/uploads/1754098369719-ttvu6f.jpeg","serverFilename":"68220496460__C1A5A21C-B38D-472E-A372-E5E929951E36.jpeg"},"rotation":0,"flags":{},"title":""}],"version":98}',
  98,
  1754099802888
], [Function (anonymous)])
    at /Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:220:21
    at new Promise (<anonymous>)
    at Database.run (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/database/database.js:219:16)
    at CanvasStateManager.saveCanvasState (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:674:23)
    at CanvasStateManager.executeOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/CanvasStateManager.js:98:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async CollaborationManager.handleExecuteOperation (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:696:28)
    at async Socket.<anonymous> (/Users/marcsteinberg/Documents/Projects/ImageCanvas/server/src/realtime/collaboration.js:65:17) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
